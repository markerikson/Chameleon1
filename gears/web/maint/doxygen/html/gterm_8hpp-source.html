<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Chameleon: gterm.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>gterm.hpp</h1><a href="gterm_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">// Copyright Timothy Miller, 1999</span>
00003 
00004 <span class="preprocessor">#ifndef INCLUDED_GTERM_H</span>
00005 <span class="preprocessor"></span><span class="preprocessor">#define INCLUDED_GTERM_H</span>
00006 <span class="preprocessor"></span>
00007 <span class="preprocessor">#ifdef __GNUG__</span>
00008 <span class="preprocessor"></span><span class="preprocessor">#pragma interface</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00010 <span class="preprocessor"></span>
00011 <span class="preprocessor">#include &lt;string.h&gt;</span>
00012 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00013 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00014 
00015 <span class="preprocessor">#include &lt;vector&gt;</span>
00016 <span class="preprocessor">#include &lt;queue&gt;</span>
00017 <span class="preprocessor">#include &lt;deque&gt;</span>
00018 <span class="preprocessor">#include &lt;string&gt;</span>
00019 <span class="comment">//#include "../common/FixedSizeQueue.h"</span>
00020 <span class="preprocessor">#include "<a class="code" href="_text_manager_8h.html">TextManager.h</a>"</span>
00021 
00022 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00023 
<a name="l00024"></a><a class="code" href="gterm_8hpp.html#a0">00024</a> <span class="preprocessor">#define MAXWIDTH 160</span>
<a name="l00025"></a><a class="code" href="gterm_8hpp.html#a1">00025</a> <span class="preprocessor"></span><span class="preprocessor">#define MAXHEIGHT 100</span>
00026 <span class="preprocessor"></span>
00027 <span class="preprocessor">#ifndef min</span>
<a name="l00028"></a><a class="code" href="gterm_8hpp.html#a2">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define min(x,y) ((x)&lt;(y)?(x):(y))</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#ifndef max</span>
<a name="l00031"></a><a class="code" href="gterm_8hpp.html#a3">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define max(x,y) ((x)&lt;(y)?(y):(x))</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00033 <span class="preprocessor"></span>
<a name="l00034"></a><a class="code" href="gterm_8hpp.html#a4">00034</a> <span class="preprocessor">#define GTERM_PC</span>
00035 <span class="preprocessor"></span>
00036 
00037 <span class="keyword">class </span><a class="code" href="class_g_term.html">GTerm</a>;
<a name="l00038"></a><a class="code" href="gterm_8hpp.html#a17">00038</a> <span class="keyword">typedef</span> void (GTerm::*StateFunc)();
00039 
<a name="l00040"></a><a class="code" href="struct_state_option.html">00040</a> <span class="keyword">struct </span><a class="code" href="struct_state_option.html">StateOption</a> {
<a name="l00041"></a><a class="code" href="struct_state_option.html#o0">00041</a>     <span class="keywordtype">int</span> byte;   <span class="comment">// char value to look for; -1==end/default</span>
<a name="l00042"></a><a class="code" href="struct_state_option.html#o1">00042</a>     StateFunc action;
<a name="l00043"></a><a class="code" href="struct_state_option.html#o2">00043</a>     <a class="code" href="struct_state_option.html">StateOption</a> *next_state;
00044 };
00045 
<a name="l00046"></a><a class="code" href="class_g_term.html">00046</a> <span class="keyword">class </span><a class="code" href="class_g_term.html">GTerm</a> {
00047 <span class="keyword">public</span>:
00048     <span class="comment">// mode flags</span>
00049     <span class="keyword">enum</span> 
00050         {
00051           <a class="code" href="class_g_term.html#w79w0">BOLD</a>=0x1, 
00052           <a class="code" href="class_g_term.html#w79w1">BLINK</a>=0x2, 
00053           <a class="code" href="class_g_term.html#w79w2">UNDERLINE</a>=0x4, 
00054           <a class="code" href="class_g_term.html#w79w3">INVERSE</a>=0x8,
00055       <a class="code" href="class_g_term.html#w79w4">NOEOLWRAP</a>=0x10, 
00056           <a class="code" href="class_g_term.html#w79w5">CURSORAPPMODE</a>=0x20, 
00057           <a class="code" href="class_g_term.html#w79w6">CURSORRELATIVE</a>=0x40, 
00058       <a class="code" href="class_g_term.html#w79w7">NEWLINE</a>=0x80, 
00059           <a class="code" href="class_g_term.html#w79w8">INSERT</a>=0x100, 
00060           <a class="code" href="class_g_term.html#w79w9">KEYAPPMODE</a>=0x200,
00061       <a class="code" href="class_g_term.html#w79w10">DEFERUPDATE</a>=0x400,
00062           <a class="code" href="class_g_term.html#w79w11">DESTRUCTBS</a>=0x800,
00063           <a class="code" href="class_g_term.html#w79w12">TEXTONLY</a>=0x1000,
00064       <a class="code" href="class_g_term.html#w79w13">LOCALECHO</a>=0x2000,
00065           <a class="code" href="class_g_term.html#w79w14">CURSORINVISIBLE</a>=0x4000,
00066 <span class="preprocessor">#ifdef GTERM_PC</span>
00067 <span class="preprocessor"></span><span class="comment">//          ,PC=0x10000</span>
00068           <a class="code" href="class_g_term.html#w79w15">PC</a>=0x8000,
00069 <span class="preprocessor">#endif // GTERM_PC</span>
00070 <span class="preprocessor"></span>          <a class="code" href="class_g_term.html#w79w16">SELECTED</a>=0x8000   <span class="comment">// flag to indicate a char is selected</span>
00071         } <a class="code" href="class_g_term.html#o0">MODES</a>;
00072 
00073 <span class="keyword">private</span>:
00074     <span class="comment">// terminal info</span>
<a name="l00075"></a><a class="code" href="class_g_term.html#r0">00075</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r0">width</a>, <a class="code" href="class_g_term.html#r1">height</a>, <a class="code" href="class_g_term.html#r2">scroll_top</a>, <a class="code" href="class_g_term.html#r3">scroll_bot</a>;
<a name="l00076"></a><a class="code" href="class_g_term.html#r4">00076</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="class_g_term.html#r4">text</a>;
00077     <span class="comment">//unsigned char* alttext;</span>
00078     <span class="comment">//vector&lt;string&gt; vectext;</span>
00079     <span class="comment">//deque&lt;string&gt; textq;</span>
00080 
<a name="l00081"></a><a class="code" href="class_g_term.html#r5">00081</a>     <a class="code" href="class_text_manager.html">TextManager</a> <a class="code" href="class_g_term.html#r5">tm</a>;
00082 
00083     <span class="comment">//string stringtext;</span>
<a name="l00084"></a><a class="code" href="class_g_term.html#r6">00084</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *<a class="code" href="class_g_term.html#r6">color</a>;
<a name="l00085"></a><a class="code" href="class_g_term.html#r7">00085</a>     <span class="keywordtype">short</span> <a class="code" href="class_g_term.html#r7">linenumbers</a>[<a class="code" href="gterm_8hpp.html#a1">MAXHEIGHT</a>]; <span class="comment">// text at text[linenumbers[y]*MAXWIDTH]</span>
<a name="l00086"></a><a class="code" href="class_g_term.html#r8">00086</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="class_g_term.html#r8">dirty_startx</a>[<a class="code" href="gterm_8hpp.html#a1">MAXHEIGHT</a>], <a class="code" href="class_g_term.html#r9">dirty_endx</a>[<a class="code" href="gterm_8hpp.html#a1">MAXHEIGHT</a>];
<a name="l00087"></a><a class="code" href="class_g_term.html#r10">00087</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r10">pending_scroll</a>; <span class="comment">// &gt;0 means scroll up</span>
<a name="l00088"></a><a class="code" href="class_g_term.html#r11">00088</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r11">doing_update</a>;
00089 
<a name="l00090"></a><a class="code" href="class_g_term.html#r12">00090</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r12">m_nextLineCounter</a>;
00091 
00092     <span class="comment">// terminal state</span>
<a name="l00093"></a><a class="code" href="class_g_term.html#r14">00093</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r13">cursor_x</a>, <a class="code" href="class_g_term.html#r14">cursor_y</a>;
<a name="l00094"></a><a class="code" href="class_g_term.html#r16">00094</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r15">save_x</a>, <a class="code" href="class_g_term.html#r16">save_y</a>, <a class="code" href="class_g_term.html#r17">save_attrib</a>;
<a name="l00095"></a><a class="code" href="class_g_term.html#r18">00095</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r18">fg_color</a>, <a class="code" href="class_g_term.html#r19">bg_color</a>;
<a name="l00096"></a><a class="code" href="class_g_term.html#r20">00096</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r20">mode_flags</a>;
<a name="l00097"></a><a class="code" href="class_g_term.html#r21">00097</a>     <span class="keywordtype">char</span> <a class="code" href="class_g_term.html#r21">tab_stops</a>[<a class="code" href="gterm_8hpp.html#a0">MAXWIDTH</a>];
<a name="l00098"></a><a class="code" href="class_g_term.html#r22">00098</a>     <a class="code" href="struct_state_option.html">StateOption</a> *<a class="code" href="class_g_term.html#r22">current_state</a>;
00099     <span class="keyword">static</span> <a class="code" href="struct_state_option.html">StateOption</a> <a class="code" href="class_g_term.html#v0">normal_state</a>[], <a class="code" href="class_g_term.html#v1">esc_state</a>[], <a class="code" href="class_g_term.html#v2">bracket_state</a>[];
00100     <span class="keyword">static</span> <a class="code" href="struct_state_option.html">StateOption</a> <a class="code" href="class_g_term.html#v3">cset_shiftin_state</a>[], <a class="code" href="class_g_term.html#v4">cset_shiftout_state</a>[];
00101     <span class="keyword">static</span> <a class="code" href="struct_state_option.html">StateOption</a> <a class="code" href="class_g_term.html#v5">hash_state</a>[];
00102     <span class="keyword">static</span> <a class="code" href="struct_state_option.html">StateOption</a> <a class="code" href="class_g_term.html#v6">vt52_normal_state</a>[], <a class="code" href="class_g_term.html#v7">vt52_esc_state</a>[];
00103     <span class="keyword">static</span> <a class="code" href="struct_state_option.html">StateOption</a> <a class="code" href="class_g_term.html#v8">vt52_cursory_state</a>[], <a class="code" href="class_g_term.html#v9">vt52_cursorx_state</a>[];
00104 
00105 <span class="keyword">public</span>:
00106         <span class="comment">// keycode translation</span>
00107         <span class="keyword">enum</span>
00108         {
00109           <a class="code" href="class_g_term.html#w80w17">KEY_NULL</a> = 0,
00110           <a class="code" href="class_g_term.html#w80w18">KEY_BACK</a> = 1000,
00111           <a class="code" href="class_g_term.html#w80w19">KEY_TAB</a>,
00112           <a class="code" href="class_g_term.html#w80w20">KEY_RETURN</a>,
00113           <a class="code" href="class_g_term.html#w80w21">KEY_ESCAPE</a>,
00114           <a class="code" href="class_g_term.html#w80w22">KEY_SPACE</a>,
00115           <a class="code" href="class_g_term.html#w80w23">KEY_LEFT</a>,
00116           <a class="code" href="class_g_term.html#w80w24">KEY_UP</a>,
00117           <a class="code" href="class_g_term.html#w80w25">KEY_RIGHT</a>,
00118           <a class="code" href="class_g_term.html#w80w26">KEY_DOWN</a>,
00119           <a class="code" href="class_g_term.html#w80w27">KEY_NUMPAD_LEFT</a>,
00120           <a class="code" href="class_g_term.html#w80w28">KEY_NUMPAD_UP</a>,
00121           <a class="code" href="class_g_term.html#w80w29">KEY_NUMPAD_RIGHT</a>,
00122           <a class="code" href="class_g_term.html#w80w30">KEY_NUMPAD_DOWN</a>,
00123           <a class="code" href="class_g_term.html#w80w31">KEY_DIVIDE</a>,
00124           <a class="code" href="class_g_term.html#w80w32">KEY_NUMPAD_DIVIDE</a>,
00125           <a class="code" href="class_g_term.html#w80w33">KEY_MULTIPLY</a>,
00126           <a class="code" href="class_g_term.html#w80w34">KEY_NUMPAD_MULTIPLY</a>,
00127           <a class="code" href="class_g_term.html#w80w35">KEY_SUBTRACT</a>,
00128           <a class="code" href="class_g_term.html#w80w36">KEY_NUMPAD_SUBTRACT</a>,
00129           <a class="code" href="class_g_term.html#w80w37">KEY_ADD</a>,
00130           <a class="code" href="class_g_term.html#w80w38">KEY_NUMPAD_ADD</a>,
00131           <a class="code" href="class_g_term.html#w80w39">KEY_HOME</a>,
00132           <a class="code" href="class_g_term.html#w80w40">KEY_NUMPAD_HOME</a>,
00133           <a class="code" href="class_g_term.html#w80w41">KEY_END</a>,
00134           <a class="code" href="class_g_term.html#w80w42">KEY_NUMPAD_END</a>,
00135           <a class="code" href="class_g_term.html#w80w43">KEY_PAGEUP</a>,
00136           <a class="code" href="class_g_term.html#w80w44">KEY_NUMPAD_PAGEUP</a>,
00137           <a class="code" href="class_g_term.html#w80w45">KEY_PAGEDOWN</a>,
00138           <a class="code" href="class_g_term.html#w80w46">KEY_NUMPAD_PAGEDOWN</a>,
00139           <a class="code" href="class_g_term.html#w80w47">KEY_INSERT</a>,
00140           <a class="code" href="class_g_term.html#w80w48">KEY_NUMPAD_INSERT</a>,
00141           <a class="code" href="class_g_term.html#w80w49">KEY_DELETE</a>,
00142           <a class="code" href="class_g_term.html#w80w50">KEY_NUMPAD_DELETE</a>,
00143           <a class="code" href="class_g_term.html#w80w51">KEY_ENTER</a>,
00144           <a class="code" href="class_g_term.html#w80w52">KEY_NUMPAD_ENTER</a>,
00145           <a class="code" href="class_g_term.html#w80w53">KEY_NEXT</a>,
00146           <a class="code" href="class_g_term.html#w80w54">KEY_PRIOR</a>,
00147           <a class="code" href="class_g_term.html#w80w55">KEY_NUMPAD0</a>,
00148           <a class="code" href="class_g_term.html#w80w56">KEY_NUMPAD1</a>,
00149           <a class="code" href="class_g_term.html#w80w57">KEY_NUMPAD2</a>,
00150           <a class="code" href="class_g_term.html#w80w58">KEY_NUMPAD3</a>,
00151           <a class="code" href="class_g_term.html#w80w59">KEY_NUMPAD4</a>,
00152           <a class="code" href="class_g_term.html#w80w60">KEY_NUMPAD5</a>,
00153           <a class="code" href="class_g_term.html#w80w61">KEY_NUMPAD6</a>,
00154           <a class="code" href="class_g_term.html#w80w62">KEY_NUMPAD7</a>,
00155           <a class="code" href="class_g_term.html#w80w63">KEY_NUMPAD8</a>,
00156           <a class="code" href="class_g_term.html#w80w64">KEY_NUMPAD9</a>,
00157           <a class="code" href="class_g_term.html#w80w65">KEY_NUMPAD_BEGIN</a>,
00158           <a class="code" href="class_g_term.html#w80w66">KEY_NUMPAD_DECIMAL</a>,
00159           <a class="code" href="class_g_term.html#w80w67">KEY_F1</a>,
00160           <a class="code" href="class_g_term.html#w80w68">KEY_F2</a>,
00161           <a class="code" href="class_g_term.html#w80w69">KEY_F3</a>,
00162           <a class="code" href="class_g_term.html#w80w70">KEY_F4</a>,
00163           <a class="code" href="class_g_term.html#w80w71">KEY_F5</a>,
00164           <a class="code" href="class_g_term.html#w80w72">KEY_F6</a>,
00165           <a class="code" href="class_g_term.html#w80w73">KEY_F7</a>,
00166           <a class="code" href="class_g_term.html#w80w74">KEY_F8</a>,
00167           <a class="code" href="class_g_term.html#w80w75">KEY_F9</a>,
00168           <a class="code" href="class_g_term.html#w80w76">KEY_F10</a>,
00169           <a class="code" href="class_g_term.html#w80w77">KEY_F11</a>,
00170           <a class="code" href="class_g_term.html#w80w78">KEY_F12</a>
00171         } KEYCODE;
00172 
00173 <span class="keyword">private</span>:
<a name="l00174"></a><a class="code" href="struct_g_term_1_1_v_t_key_seq.html">00174</a>         <span class="keyword">typedef</span> <span class="keyword">struct</span>
00175 <span class="keyword">        </span>{
00176           <span class="keywordtype">int</span>
<a name="l00177"></a><a class="code" href="struct_g_term_1_1_v_t_key_seq.html#o0">00177</a>             keyCode;
00178             
00179           <span class="keywordtype">char</span>
<a name="l00180"></a><a class="code" href="struct_g_term_1_1_v_t_key_seq.html#o1">00180</a>             *seq;
00181         } <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a>;
00182         
00183         <span class="keyword">static</span> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a> <a class="code" href="class_g_term.html#v10">cursor_keys</a>[];
00184         <span class="keyword">static</span> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a> <a class="code" href="class_g_term.html#v11">cursor_app_keys</a>[];
00185         <span class="keyword">static</span> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a> <a class="code" href="class_g_term.html#v12">keypad_keys</a>[];
00186         <span class="keyword">static</span> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a> <a class="code" href="class_g_term.html#v13">keypad_app_keys</a>[];
00187         <span class="keyword">static</span> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a> <a class="code" href="class_g_term.html#v14">other_keys</a>[];
00188         
00189 <span class="preprocessor">#ifdef GTERM_PC        </span>
<a name="l00190"></a><a class="code" href="struct_g_term_1_1_p_c_key_seq.html">00190</a> <span class="preprocessor"></span>        <span class="keyword">typedef</span> <span class="keyword">struct</span>
00191 <span class="keyword">        </span>{
00192           <span class="keywordtype">int</span>
<a name="l00193"></a><a class="code" href="struct_g_term_1_1_p_c_key_seq.html#o0">00193</a>             keyCode;
00194             
00195           <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>
<a name="l00196"></a><a class="code" href="struct_g_term_1_1_p_c_key_seq.html#o2">00196</a>             normSeq,
00197             shiftSeq,
00198             ctrlSeq,
00199             altSeq;
00200         } <a class="code" href="struct_g_term_1_1_p_c_key_seq.html">PCKeySeq</a>;
00201         
00202         <span class="keyword">static</span> <a class="code" href="struct_g_term_1_1_p_c_key_seq.html">PCKeySeq</a> <a class="code" href="class_g_term.html#v15">pc_keys</a>[];
00203 <span class="preprocessor">#endif // GTERM_PC        </span>
00204 <span class="preprocessor"></span>        
00205         <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a> *<a class="code" href="class_g_term.html#d0">translate_vt_keycode</a>(<span class="keywordtype">int</span> keyCode, <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a> *table);
00206 <span class="preprocessor">#ifdef GTERM_PC        </span>
00207 <span class="preprocessor"></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="class_g_term.html#d1">translate_pc_keycode</a>(<span class="keywordtype">int</span> KeyCode, <span class="keywordtype">int</span> shift, <span class="keywordtype">int</span> ctrl, <span class="keywordtype">int</span> alt);
00208 <span class="preprocessor">#endif // GTERM_PC</span>
00209 <span class="preprocessor"></span>
00210 <span class="preprocessor">#ifdef GTERM_PC</span>
00211 <span class="preprocessor"></span>
<a name="l00212"></a><a class="code" href="gterm_8hpp.html#a5">00212</a> <span class="preprocessor">#define GTERM_PC_MAXARGS             10</span>
00213 <span class="preprocessor"></span>
<a name="l00214"></a><a class="code" href="gterm_8hpp.html#a6">00214</a> <span class="preprocessor">#define GTERM_PC_CMD_EXIT            0     // end console mode</span>
<a name="l00215"></a><a class="code" href="gterm_8hpp.html#a7">00215</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_CURONOFF        1     // cursor on/off</span>
<a name="l00216"></a><a class="code" href="gterm_8hpp.html#a8">00216</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_MOVECURSOR      2     // move cursor to x,y</span>
<a name="l00217"></a><a class="code" href="gterm_8hpp.html#a9">00217</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_PUTTEXT         3     // put text</span>
<a name="l00218"></a><a class="code" href="gterm_8hpp.html#a10">00218</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_WRITE           4     // write text</span>
<a name="l00219"></a><a class="code" href="gterm_8hpp.html#a11">00219</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_MOVETEXT        5     // move text</span>
<a name="l00220"></a><a class="code" href="gterm_8hpp.html#a12">00220</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_BEEP            6     // beep</span>
<a name="l00221"></a><a class="code" href="gterm_8hpp.html#a13">00221</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_SELECTPRINTER   7     // select printer</span>
<a name="l00222"></a><a class="code" href="gterm_8hpp.html#a14">00222</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_PRINTCHAR       8     // print a single character</span>
<a name="l00223"></a><a class="code" href="gterm_8hpp.html#a15">00223</a> <span class="preprocessor"></span><span class="preprocessor">#define GTERM_PC_CMD_PRINTCHARS      9     // prints multiple characters</span>
00224 <span class="preprocessor"></span>
<a name="l00225"></a><a class="code" href="gterm_8hpp.html#a16">00225</a> <span class="preprocessor">#define GTERM_PC_MAXPRINTERNAME      100</span>
00226 <span class="preprocessor"></span>
<a name="l00227"></a><a class="code" href="class_g_term.html#r23">00227</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r23">pc_cury</a>;
<a name="l00228"></a><a class="code" href="class_g_term.html#r24">00228</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r24">pc_curx</a>;
<a name="l00229"></a><a class="code" href="class_g_term.html#r25">00229</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r25">pc_state</a>;
<a name="l00230"></a><a class="code" href="class_g_term.html#r26">00230</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r26">pc_curcmd</a>;
<a name="l00231"></a><a class="code" href="class_g_term.html#r27">00231</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r27">pc_numargs</a>;
<a name="l00232"></a><a class="code" href="class_g_term.html#r28">00232</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r28">pc_argcount</a>;
<a name="l00233"></a><a class="code" href="class_g_term.html#r29">00233</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r29">pc_numdata</a>;
<a name="l00234"></a><a class="code" href="class_g_term.html#r30">00234</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r30">pc_datacount</a>;
<a name="l00235"></a><a class="code" href="class_g_term.html#r31">00235</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r31">pc_oldWidth</a>;
<a name="l00236"></a><a class="code" href="class_g_term.html#r32">00236</a>         <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r32">pc_oldHeight</a>;
<a name="l00237"></a><a class="code" href="class_g_term.html#r33">00237</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="class_g_term.html#r33">pc_args</a>[<a class="code" href="gterm_8hpp.html#a5">GTERM_PC_MAXARGS</a>];
<a name="l00238"></a><a class="code" href="class_g_term.html#r34">00238</a>         <span class="keywordtype">char</span> *<a class="code" href="class_g_term.html#r34">pc_machinename</a>;
<a name="l00239"></a><a class="code" href="class_g_term.html#r35">00239</a>         <span class="keywordtype">char</span> <a class="code" href="class_g_term.html#r35">pc_printername</a>[<a class="code" href="gterm_8hpp.html#a16">GTERM_PC_MAXPRINTERNAME</a>];
00240 
00241 <span class="comment">//</span>
00242 <span class="comment">//  Define state tables</span>
00243 <span class="comment">//</span>
00244         <span class="keyword">static</span> <a class="code" href="struct_state_option.html">StateOption</a> <a class="code" href="class_g_term.html#v16">pc_cmd_state</a>[];
00245         <span class="keyword">static</span> <a class="code" href="struct_state_option.html">StateOption</a> <a class="code" href="class_g_term.html#v17">pc_arg_state</a>[];
00246         <span class="keyword">static</span> <a class="code" href="struct_state_option.html">StateOption</a> <a class="code" href="class_g_term.html#v18">pc_data_state</a>[];
00247 
00248 <span class="comment">//</span>
00249 <span class="comment">//  Define actions</span>
00250 <span class="comment">//</span>
00251         <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d2">pc_begin</a>(<span class="keywordtype">void</span>);
00252         <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d3">pc_end</a>(<span class="keywordtype">void</span>);
00253         <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d4">pc_cmd</a>(<span class="keywordtype">void</span>);
00254         <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d5">pc_arg</a>(<span class="keywordtype">void</span>);
00255         <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d6">pc_data</a>(<span class="keywordtype">void</span>);        
00256         
00257 <span class="preprocessor">#endif  // GTERM_PC</span>
00258 <span class="preprocessor"></span>
00259     <span class="comment">// utility functions</span>
00260     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d7">update_changes</a>();
00261     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d8">scroll_region</a>(<span class="keywordtype">int</span> start_y, <span class="keywordtype">int</span> end_y, <span class="keywordtype">int</span> num);    <span class="comment">// does clear</span>
00262     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d9">shift_text</a>(<span class="keywordtype">int</span> y, <span class="keywordtype">int</span> start_x, <span class="keywordtype">int</span> end_x, <span class="keywordtype">int</span> num); <span class="comment">// ditto</span>
00263     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d10">clear_area</a>(<span class="keywordtype">int</span> start_x, <span class="keywordtype">int</span> start_y, <span class="keywordtype">int</span> end_x, <span class="keywordtype">int</span> end_y);
00264     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d11">changed_line</a>(<span class="keywordtype">int</span> y, <span class="keywordtype">int</span> start_x, <span class="keywordtype">int</span> end_x);
00265     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d12">move_cursor</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y);
00266     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#d13">calc_color</a>(<span class="keywordtype">int</span> fg, <span class="keywordtype">int</span> bg, <span class="keywordtype">int</span> flags);
00267 
00268     <span class="comment">// action parameters</span>
<a name="l00269"></a><a class="code" href="class_g_term.html#r37">00269</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r36">nparam</a>, <a class="code" href="class_g_term.html#r37">param</a>[30];
<a name="l00270"></a><a class="code" href="class_g_term.html#r38">00270</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="class_g_term.html#r38">input_data</a>;
<a name="l00271"></a><a class="code" href="class_g_term.html#r42">00271</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#r39">data_len</a>, <a class="code" href="class_g_term.html#r40">q_mode</a>, <a class="code" href="class_g_term.html#r41">got_param</a>, <a class="code" href="class_g_term.html#r42">quote_mode</a>;
00272 
00273     <span class="comment">// terminal actions</span>
00274     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d14">normal_input</a>();
00275     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d15">set_q_mode</a>();
00276     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d16">set_quote_mode</a>();
00277     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d17">clear_param</a>();
00278     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d18">param_digit</a>();
00279     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d19">next_param</a>();
00280 
00281     <span class="comment">// non-printing characters</span>
00282     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d20">cr</a>(), <a class="code" href="class_g_term.html#d21">lf</a>(), <a class="code" href="class_g_term.html#d22">ff</a>(), <a class="code" href="class_g_term.html#d23">bell</a>(), <a class="code" href="class_g_term.html#d24">tab</a>(), <a class="code" href="class_g_term.html#d25">bs</a>();
00283 
00284     <span class="comment">// escape sequence actions</span>
00285     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d26">keypad_numeric</a>();
00286     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d27">keypad_application</a>();
00287     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d28">save_cursor</a>();
00288     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d29">restore_cursor</a>();
00289     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d30">set_tab</a>();
00290     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d31">index_down</a>();
00291     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d32">index_up</a>();
00292     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d33">next_line</a>();
00293     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d34">reset</a>();
00294 
00295     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d35">cursor_left</a>();
00296     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d36">cursor_down</a>();
00297     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d37">cursor_right</a>();
00298     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d38">cursor_up</a>();
00299     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d39">cursor_position</a>();
00300     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d40">device_attrib</a>();
00301     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d41">delete_char</a>();
00302     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d42">set_mode</a>();
00303     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d43">clear_mode</a>();
00304     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d44">request_param</a>();
00305     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d45">set_margins</a>();
00306     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d46">delete_line</a>();
00307     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d47">status_report</a>();
00308     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d48">erase_display</a>();
00309     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d49">erase_line</a>();
00310     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d50">insert_line</a>();
00311     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d51">set_colors</a>();
00312     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d52">clear_tab</a>();
00313     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d53">insert_char</a>();
00314     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d54">screen_align</a>();
00315     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d55">erase_char</a>();
00316 
00317     <span class="comment">// vt52 stuff</span>
00318     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d56">vt52_cursory</a>();
00319     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d57">vt52_cursorx</a>();
00320     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#d58">vt52_ident</a>();
00321 
00322 <span class="keyword">public</span>:
00323     <a class="code" href="class_g_term.html#a0">GTerm</a>(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h);
00324     <span class="keyword">virtual</span> <a class="code" href="class_g_term.html#a1">~GTerm</a>();
00325 
00326     <span class="comment">// function to control terminal</span>
00327     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a2">ProcessInput</a>(<span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data);
<a name="l00328"></a><a class="code" href="class_g_term.html#a3">00328</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a3">ProcessOutput</a>(<span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data) { <a class="code" href="class_g_term.html#a27">SendBack</a>(len, (<span class="keywordtype">char</span> *)data); }
00329     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a4">ResizeTerminal</a>(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height);
<a name="l00330"></a><a class="code" href="class_g_term.html#a5">00330</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a5">Width</a>() { <span class="keywordflow">return</span> <a class="code" href="class_g_term.html#r0">width</a>; }
<a name="l00331"></a><a class="code" href="class_g_term.html#a6">00331</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a6">Height</a>() { <span class="keywordflow">return</span> <a class="code" href="class_g_term.html#r1">height</a>; }
<a name="l00332"></a><a class="code" href="class_g_term.html#a7">00332</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a7">MaxHeight</a>() { <span class="keywordflow">return</span> <a class="code" href="gterm_8hpp.html#a1">MAXHEIGHT</a>; }
00333     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a8">Update</a>();
00334     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a9">ExposeArea</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h);
00335     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a10">Reset</a>();
00336 
00337     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a11">Scroll</a>(<span class="keywordtype">int</span> numLines, <span class="keywordtype">bool</span> scrollUp);
00338     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a12">GetScrollHeight</a>();
00339     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a13">GetScrollPosition</a>();
00340     <a class="code" href="class_text_manager.html">TextManager</a> <a class="code" href="class_g_term.html#a14">GetTM</a>();
00341     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a15">GetColor</a>();
00342     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a16">DecodeColor</a>(<span class="keywordtype">int</span> color, <span class="keywordtype">int</span> &amp;fg_color, <span class="keywordtype">int</span> &amp;bg_color);
00343 
00344     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a17">SetTerminalHistory</a>(<span class="keywordtype">int</span> size);
00345 
00346     <span class="keywordtype">bool</span> <a class="code" href="class_g_term.html#a18">IsScrolledUp</a>();
<a name="l00347"></a><a class="code" href="class_g_term.html#a19">00347</a>     <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a19">GetMode</a>() { <span class="keywordflow">return</span> <a class="code" href="class_g_term.html#r20">mode_flags</a>; }
<a name="l00348"></a><a class="code" href="class_g_term.html#a20">00348</a>     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a20">SetMode</a>(<span class="keywordtype">int</span> mode) { <a class="code" href="class_g_term.html#r20">mode_flags</a> = mode; }
00349     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a21">set_mode_flag</a>(<span class="keywordtype">int</span> flag);
00350     <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a22">clear_mode_flag</a>(<span class="keywordtype">int</span> flag);
00351 
00352     <span class="comment">// manditory child-supplied functions</span>
00353     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a23">DrawText</a>(<span class="keywordtype">int</span> fg_color, <span class="keywordtype">int</span> bg_color, <span class="keywordtype">int</span> flags,
00354         <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *string) = 0;
00355     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a24">DrawCursor</a>(<span class="keywordtype">int</span> fg_color, <span class="keywordtype">int</span> bg_color, <span class="keywordtype">int</span> flags,
00356         <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c) = 0;
00357 
00358     <span class="comment">// optional child-supplied functions</span>
<a name="l00359"></a><a class="code" href="class_g_term.html#a25">00359</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a25">MoveChars</a>(<span class="keywordtype">int</span> sx, <span class="keywordtype">int</span> sy, <span class="keywordtype">int</span> dx, <span class="keywordtype">int</span> dy, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h) { }
<a name="l00360"></a><a class="code" href="class_g_term.html#a26">00360</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a26">ClearChars</a>(<span class="keywordtype">int</span> bg_color, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h) { }
<a name="l00361"></a><a class="code" href="class_g_term.html#a27">00361</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a27">SendBack</a>(<span class="keywordtype">int</span> len, <span class="keywordtype">char</span> *data) { }
<a name="l00362"></a><a class="code" href="class_g_term.html#a28">00362</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a27">SendBack</a>(<span class="keywordtype">char</span> *data) { <a class="code" href="class_g_term.html#a27">SendBack</a>(strlen(data), data); }
<a name="l00363"></a><a class="code" href="class_g_term.html#a29">00363</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a29">ModeChange</a>(<span class="keywordtype">int</span> state) { }
<a name="l00364"></a><a class="code" href="class_g_term.html#a30">00364</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a30">Bell</a>() { }
<a name="l00365"></a><a class="code" href="class_g_term.html#a31">00365</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a31">RequestSizeChange</a>(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h) { }
00366 
00367         <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a32">TranslateKeyCode</a>(<span class="keywordtype">int</span> keycode, <span class="keywordtype">int</span> *len, <span class="keywordtype">char</span> *data,
00368                                      <span class="keywordtype">int</span> shift = 0, <span class="keywordtype">int</span> ctrl = 0, <span class="keywordtype">int</span> alt = 0);
00369 
00370 <span class="preprocessor">#ifdef GTERM_PC</span>
<a name="l00371"></a><a class="code" href="class_g_term.html#a33">00371</a> <span class="preprocessor"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a33">SelectPrinter</a>(<span class="keywordtype">char</span> *PrinterName) {}
<a name="l00372"></a><a class="code" href="class_g_term.html#a34">00372</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a34">PrintChars</a>(<span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data) {}
00373 
00374         <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a35">SetMachineName</a>(<span class="keywordtype">char</span> *machinename);
<a name="l00375"></a><a class="code" href="class_g_term.html#a36">00375</a>         <span class="keywordtype">char</span> *<a class="code" href="class_g_term.html#a36">GetMachineName</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> <a class="code" href="class_g_term.html#r34">pc_machinename</a>; }
00376 <span class="preprocessor">#endif // GTERM_PC</span>
00377 <span class="preprocessor"></span>
00378         <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="class_g_term.html#a37">IsSelected</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y);
00379         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_g_term.html#a38">Select</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> select);
00380         <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="class_g_term.html#a39">GetChar</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y);
00381 };
00382 
00383 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Apr 28 16:45:38 2004 for Chameleon by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
