<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Chameleon: TextManager.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>TextManager.cpp</h1><a href="_text_manager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include "<a class="code" href="_text_manager_8h.html">TextManager.h</a>"</span>
00002 
00003 <span class="preprocessor">#include &lt;iostream&gt;</span>
00004 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00005 <span class="preprocessor">#include &lt;wx/wx.h&gt;</span>
00006 <span class="preprocessor">#include &lt;wx/file.h&gt;</span>
00007 <span class="preprocessor">#include &lt;wx/dcmemory.h&gt;</span>
00008 <span class="preprocessor">#include &lt;wx/image.h&gt;</span>
00009 <span class="preprocessor">#include "<a class="code" href="gterm_8hpp.html">gterm.hpp</a>"</span>
00010 <span class="preprocessor">#include "../common/debug.h"</span>
00011 
00012 <span class="preprocessor">#ifdef _DEBUG</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define new DEBUG_NEW</span>
00014 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00015 <span class="preprocessor"></span>
00016 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00017 
<a name="l00032"></a><a class="code" href="class_text_manager.html#a0">00032</a> <a class="code" href="class_text_manager.html#a0">TextManager::TextManager</a>(<a class="code" href="class_g_term.html">GTerm</a>* parent, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">int</span> maxWidth, <span class="keywordtype">int</span> maxHeight <span class="comment">/* = 50 */</span>)
00033     :m_parent(parent), m_viewportWidth(width), m_viewportHeight(height), m_maxWidth(maxWidth), m_maxHeight(maxHeight)
00034 {
00035     <span class="keywordflow">if</span>(m_parent != <a class="code" href="_crc16_8h.html#a0">NULL</a>)
00036     {
00037         <a class="code" href="class_text_manager.html#a28">Reset</a>();
00038     }
00039     
00040 }
00041 
<a name="l00050"></a><a class="code" href="class_text_manager.html#a28">00050</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a28">TextManager::Reset</a>()
00051 {
00052     <a class="code" href="class_text_manager.html#r10">m_blankline</a>.resize(<a class="code" href="class_text_manager.html#r7">m_maxWidth</a>, <span class="charliteral">' '</span>);
00053     <a class="code" href="class_text_manager.html#r12">m_text</a> = deque&lt;string&gt;(<a class="code" href="class_text_manager.html#r6">m_maxHeight</a>, <a class="code" href="class_text_manager.html#r10">m_blankline</a>);
00054 
00055     <span class="comment">// black background, white text</span>
00056     <a class="code" href="class_text_manager.html#r9">m_blankColor</a> = 112;
00057     vector&lt;unsigned short&gt; colorline(<a class="code" href="class_text_manager.html#r7">m_maxWidth</a>, <a class="code" href="class_text_manager.html#r9">m_blankColor</a>);
00058     <a class="code" href="class_text_manager.html#r11">m_color</a> = deque&lt; vector&lt; unsigned short&gt; &gt;(m_maxHeight, colorline);
00059 
00060     <a class="code" href="class_text_manager.html#r1">m_bottomLine</a> = m_maxHeight - 1; 
00061     <a class="code" href="class_text_manager.html#r0">m_topLine</a> = <a class="code" href="class_text_manager.html#r1">m_bottomLine</a> - <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a> + 1;
00062     <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> = 0;
00063 
00064     <a class="code" href="class_text_manager.html#r8">m_cursorLine</a> = 0;
00065     <a class="code" href="class_text_manager.html#r5">m_linesReceived</a> = 1;
00066 }
00067 
<a name="l00076"></a><a class="code" href="class_text_manager.html#a24">00076</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a24">TextManager::AddNewLine</a>()
00077 {
00078     <a class="code" href="class_text_manager.html#a24">AddNewLine</a>(<a class="code" href="class_text_manager.html#r10">m_blankline</a>);
00079 }
00080 
<a name="l00091"></a><a class="code" href="class_text_manager.html#a25">00091</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a24">TextManager::AddNewLine</a>(string newline)
00092 {
00093     <span class="keywordflow">if</span>(newline.size() != <a class="code" href="class_text_manager.html#r7">m_maxWidth</a>)
00094     {
00095         newline.resize(<a class="code" href="class_text_manager.html#r7">m_maxWidth</a>, <span class="charliteral">' '</span>);
00096     }
00097     <a class="code" href="class_text_manager.html#r12">m_text</a>.push_back(newline);
00098 
00099     vector&lt;unsigned short&gt; linecolors;
00100     linecolors.resize(<a class="code" href="class_text_manager.html#r7">m_maxWidth</a>, <a class="code" href="class_text_manager.html#r9">m_blankColor</a>);
00101     <a class="code" href="class_text_manager.html#r11">m_color</a>.push_back(linecolors);
00102 
00103     <a class="code" href="class_text_manager.html#r5">m_linesReceived</a>++;
00104 
00105     <span class="comment">// make sure that we no more than m_maxHeight lines stored</span>
00106     <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)<a class="code" href="class_text_manager.html#r12">m_text</a>.size() &gt; <a class="code" href="class_text_manager.html#r6">m_maxHeight</a>)
00107     {
00108         <a class="code" href="class_text_manager.html#r12">m_text</a>.pop_front();
00109         <a class="code" href="class_text_manager.html#r11">m_color</a>.pop_front();
00110     }
00111     <span class="keywordflow">else</span>
00112     {
00113         <span class="comment">// cursor tracking</span>
00114         <span class="keywordflow">if</span>(<a class="code" href="class_text_manager.html#r1">m_bottomLine</a> &lt; (<a class="code" href="class_text_manager.html#r6">m_maxHeight</a> - 1))
00115         {
00116             <a class="code" href="class_text_manager.html#r1">m_bottomLine</a>++;
00117             <a class="code" href="class_text_manager.html#r0">m_topLine</a> = <a class="code" href="class_text_manager.html#r1">m_bottomLine</a> - <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a> + 1;
00118         }
00119     }
00120 }
00121 
<a name="l00132"></a><a class="code" href="class_text_manager.html#a29">00132</a> string &amp;<a class="code" href="class_text_manager.html#a29">TextManager::operator []</a>(<span class="keywordtype">int</span> index)
00133 {
00134     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#a7">GetLineAdjusted</a>(index);
00135 }
00136 
<a name="l00148"></a><a class="code" href="class_text_manager.html#a26">00148</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a26">TextManager::Scroll</a>(<span class="keywordtype">int</span> numLines, <span class="keywordtype">bool</span> scrollUp)
00149 {
00150     <span class="keywordtype">int</span> actualLinesToScroll = numLines;
00151     
00152     <span class="keywordflow">if</span>(scrollUp)
00153     {
00154         <span class="comment">// skip out if we're scrolled all the way up</span>
00155         <span class="keywordflow">if</span>( ( (<a class="code" href="class_text_manager.html#r0">m_topLine</a> - <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a>) == 0) || 
00156             ( (<a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> + <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>) &gt;= (<a class="code" href="class_text_manager.html#r5">m_linesReceived</a> -1)))
00157         {
00158             <span class="keywordflow">return</span>;
00159         }
00160         <span class="keywordflow">if</span>(<a class="code" href="class_text_manager.html#r0">m_topLine</a> &lt; actualLinesToScroll)
00161         {
00162             actualLinesToScroll = <a class="code" href="class_text_manager.html#r0">m_topLine</a>;
00163         }
00164 
00165         <span class="keywordtype">int</span> limiter = <a class="code" href="class_text_manager.html#r0">m_topLine</a> - <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a>;
00166         <span class="keywordflow">if</span>(actualLinesToScroll &gt; limiter)
00167         {
00168             actualLinesToScroll = limiter;
00169         }
00170 
00171         <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> += actualLinesToScroll;
00172     }
00173     <span class="keywordflow">else</span>
00174     {
00175         <span class="keywordflow">if</span>( (<a class="code" href="class_text_manager.html#r1">m_bottomLine</a> - <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a>) == (<a class="code" href="class_text_manager.html#r12">m_text</a>.size() - 1))
00176         {
00177             <span class="keywordflow">return</span>;
00178         }
00179         
00180         <span class="keywordtype">int</span> linesBelow = <a class="code" href="class_text_manager.html#r12">m_text</a>.size() - (<a class="code" href="class_text_manager.html#r1">m_bottomLine</a> - <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a>) - 1;
00181         <span class="keywordflow">if</span>( linesBelow &lt; actualLinesToScroll)
00182         {
00183             actualLinesToScroll = linesBelow;
00184         }
00185         <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> -= actualLinesToScroll;
00186 
00187         <span class="keywordflow">if</span>(<a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> &lt; 0)
00188         {
00189             <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> = 0;
00190         }
00191     }   
00192 }
00193 
<a name="l00202"></a><a class="code" href="class_text_manager.html#a1">00202</a> <span class="keywordtype">int</span> <a class="code" href="class_text_manager.html#a1">TextManager::GetSize</a>()
00203 {
00204     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r12">m_text</a>.size();
00205 }
00206 
<a name="l00218"></a><a class="code" href="class_text_manager.html#a27">00218</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a27">TextManager::Resize</a>(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
00219 {
00220     <span class="keywordflow">if</span>(height == <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>)
00221     {
00222         <span class="keywordflow">return</span>;
00223     }
00224 
00225     <span class="keywordtype">int</span> oldCursorLocation = <a class="code" href="class_text_manager.html#r0">m_topLine</a> + <a class="code" href="class_text_manager.html#r8">m_cursorLine</a>;
00226 
00227     <span class="keywordtype">int</span> oldViewportHeight = <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>;
00228     m_viewportHeight = height;
00229 
00230     <a class="code" href="class_text_manager.html#r1">m_bottomLine</a> = <a class="code" href="class_text_manager.html#r6">m_maxHeight</a> - 1; 
00231     <a class="code" href="class_text_manager.html#r0">m_topLine</a> = <a class="code" href="class_text_manager.html#r1">m_bottomLine</a> - m_viewportHeight + 1;
00232 
00233     <span class="comment">//int newCursorLine;</span>
00234 
00235     <span class="comment">// TODO Need to do some more recalculations... this case here</span>
00236     <span class="comment">// is going to ripple off into stuff like SetCursorLine and so on</span>
00237     <span class="comment">// Hmm... maybe set m_topLine to the new cursor line and pop</span>
00238     <span class="comment">// off the bottom lines as necessary?</span>
00239     <span class="keywordflow">if</span>(<a class="code" href="class_text_manager.html#r0">m_topLine</a> &gt; oldCursorLocation)
00240     {
00241 
00242     }
00243 
00244     <span class="keywordflow">if</span>(<a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> &gt; 0)
00245     {
00246         <span class="keywordtype">int</span> numLinesDifference = m_viewportHeight - oldViewportHeight;
00247 
00248         <span class="keywordflow">if</span>(numLinesDifference &gt; 0)
00249         {
00250             <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> -= numLinesDifference;
00251 
00252             <span class="keywordflow">if</span>(<a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> &lt; 0)
00253             {
00254                 <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a> = 0;
00255             }
00256         }
00257     }
00258     
00259 }
00260 
00261 
<a name="l00272"></a><a class="code" href="class_text_manager.html#a6">00272</a> string&amp; <a class="code" href="class_text_manager.html#a6">TextManager::GetLine</a>(<span class="keywordtype">int</span> index)
00273 {
00274     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r12">m_text</a>[index];
00275 }
00276 
<a name="l00287"></a><a class="code" href="class_text_manager.html#a7">00287</a> string&amp; <a class="code" href="class_text_manager.html#a7">TextManager::GetLineAdjusted</a>(<span class="keywordtype">int</span> index)
00288 {
00289     <span class="keywordtype">int</span> actualLine = <a class="code" href="class_text_manager.html#d0">AdjustIndex</a>(index);
00290     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r12">m_text</a>[actualLine];
00291 }
00292 
<a name="l00304"></a><a class="code" href="class_text_manager.html#a16">00304</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a16">TextManager::SetLine</a>(<span class="keywordtype">int</span> index, string line)
00305 {
00306     <a class="code" href="class_text_manager.html#r12">m_text</a>[index] = line;
00307 }
00308 
<a name="l00320"></a><a class="code" href="class_text_manager.html#a17">00320</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a17">TextManager::SetLineAdjusted</a>(<span class="keywordtype">int</span> index, string line)
00321 {
00322     <span class="keywordtype">int</span> actualLine = <a class="code" href="class_text_manager.html#d0">AdjustIndex</a>(index);
00323 
00324     <a class="code" href="class_text_manager.html#r12">m_text</a>[actualLine] = line;
00325 }
00326 
<a name="l00339"></a><a class="code" href="class_text_manager.html#a14">00339</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a14">TextManager::SetCharAdjusted</a>(<span class="keywordtype">int</span> y, <span class="keywordtype">int</span> x, <span class="keywordtype">char</span> c)
00340 {
00341     <span class="keywordtype">int</span> actualLine = <a class="code" href="class_text_manager.html#d0">AdjustIndex</a>(y);
00342 
00343     <span class="keywordflow">if</span>( (actualLine &gt; <a class="code" href="class_text_manager.html#r6">m_maxHeight</a>) || (y &gt;= <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>))
00344     {
00345         <span class="comment">// if we're here, then there's a good chance that the server thinks we're</span>
00346         <span class="comment">// doing 80x24, when we're actually something smaller.  At the moment, tough.</span>
00347         wxLogDebug(<span class="stringliteral">"Bad Y value in TextManagerM::SetCharAdjusted.  y = %d, viewport height = %d"</span>, y, <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>);
00348         <span class="keywordflow">return</span>;
00349     }
00350     <a class="code" href="class_text_manager.html#r12">m_text</a>[actualLine][x] = c;
00351 }
00352 
<a name="l00364"></a><a class="code" href="class_text_manager.html#a8">00364</a> <span class="keywordtype">char</span> <a class="code" href="class_text_manager.html#a8">TextManager::GetCharAdjusted</a>(<span class="keywordtype">int</span> y, <span class="keywordtype">int</span> x)
00365 {
00366     <span class="keywordtype">int</span> actualLine = <a class="code" href="class_text_manager.html#d0">AdjustIndex</a>(y);
00367 
00368     <span class="keywordflow">if</span>( (actualLine &gt; <a class="code" href="class_text_manager.html#r6">m_maxHeight</a>) || (y &gt;= <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>))
00369     {
00370         wxLogDebug(<span class="stringliteral">"Bad Y value in TextManager::GetCharAdjusted.  y = %d, viewport height = %d"</span>, y, <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>);
00371         <span class="keywordflow">return</span> <span class="charliteral">' '</span>;
00372     }
00373 
00374     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r12">m_text</a>[actualLine][x];
00375 }
00376 
<a name="l00388"></a><a class="code" href="class_text_manager.html#a9">00388</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="class_text_manager.html#a9">TextManager::GetColor</a>(<span class="keywordtype">int</span> y, <span class="keywordtype">int</span> x)
00389 {
00390     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r11">m_color</a>[y][x];
00391 }
00392 
<a name="l00404"></a><a class="code" href="class_text_manager.html#a10">00404</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="class_text_manager.html#a10">TextManager::GetColorAdjusted</a>(<span class="keywordtype">int</span> y, <span class="keywordtype">int</span> x)
00405 {
00406     <span class="keywordtype">int</span> actualLine = <a class="code" href="class_text_manager.html#d0">AdjustIndex</a>(y);
00407 
00408     <span class="keywordflow">if</span>( (actualLine &gt; <a class="code" href="class_text_manager.html#r6">m_maxHeight</a>) || (y &gt;= <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>))
00409     {
00410         wxLogDebug(<span class="stringliteral">"Bad Y value in TM::GCA.  y = %d, viewport height = %d"</span>, y, <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>);
00411         <span class="keywordflow">return</span> 0;
00412     }
00413     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r11">m_color</a>[actualLine][x];
00414 }
00415 
<a name="l00428"></a><a class="code" href="class_text_manager.html#a18">00428</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a18">TextManager::SetColor</a>(<span class="keywordtype">int</span> y, <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> value)
00429 {
00430     <a class="code" href="class_text_manager.html#r11">m_color</a>[y][x] = value;
00431 }
00432 
<a name="l00445"></a><a class="code" href="class_text_manager.html#a19">00445</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a19">TextManager::SetColorAdjusted</a>(<span class="keywordtype">int</span> y, <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> value)
00446 {
00447     <span class="keywordtype">int</span> actualLine = <a class="code" href="class_text_manager.html#d0">AdjustIndex</a>(y);
00448 
00449     <span class="keywordflow">if</span>( (actualLine &gt; <a class="code" href="class_text_manager.html#r6">m_maxHeight</a>) || (y &gt;= <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>))
00450     {
00451         wxLogDebug(<span class="stringliteral">"Bad Y value in TM::SCA.  y = %d, viewport height = %d"</span>, y, <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>);
00452         <span class="keywordflow">return</span>;
00453     }
00454 
00455     <span class="keywordflow">if</span>(value != <a class="code" href="class_text_manager.html#r9">m_blankColor</a>)
00456     {
00457         <span class="keywordtype">int</span> q = 42;
00458     }
00459     <a class="code" href="class_text_manager.html#r11">m_color</a>[actualLine][x] = value;
00460 }
00461 
<a name="l00472"></a><a class="code" href="class_text_manager.html#a15">00472</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a15">TextManager::SetCursorLine</a>(<span class="keywordtype">int</span> line)
00473 {
00474     <span class="keywordflow">if</span>(line &gt;= <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>)
00475     {
00476         string bottomString = <a class="code" href="class_text_manager.html#a7">GetLineAdjusted</a>(<a class="code" href="class_text_manager.html#r3">m_viewportHeight</a> - 1);
00477 
00478         <span class="keywordflow">if</span>(bottomString != <a class="code" href="class_text_manager.html#r10">m_blankline</a>)
00479         {
00480             <span class="keywordtype">int</span> numNewLines = line - <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a> + 1; 
00481             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; numNewLines; i++)
00482             {
00483                 <a class="code" href="class_text_manager.html#a24">AddNewLine</a>();
00484             }
00485         }
00486         
00487         line = <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a> - 1;        
00488     }
00489     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(line &lt; 0)
00490     {
00491         line = 0;
00492     }
00493 
00494     <a class="code" href="class_text_manager.html#r8">m_cursorLine</a> = line;
00495 }
00496 
<a name="l00505"></a><a class="code" href="class_text_manager.html#a11">00505</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a11">TextManager::CursorDown</a>()
00506 {
00507     <a class="code" href="class_text_manager.html#a15">SetCursorLine</a>(<a class="code" href="class_text_manager.html#r8">m_cursorLine</a> + 1);
00508 
00509     <a class="code" href="class_text_manager.html#r5">m_linesReceived</a>++;  
00510 }
00511 
<a name="l00520"></a><a class="code" href="class_text_manager.html#a12">00520</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a12">TextManager::CursorUp</a>()
00521 {
00522     <a class="code" href="class_text_manager.html#a15">SetCursorLine</a>(<a class="code" href="class_text_manager.html#r8">m_cursorLine</a> - 1);
00523 }
00524 
<a name="l00535"></a><a class="code" href="class_text_manager.html#d0">00535</a> <span class="keywordtype">int</span> <a class="code" href="class_text_manager.html#d0">TextManager::AdjustIndex</a>(<span class="keywordtype">int</span> index)
00536 {
00537     <span class="keywordtype">int</span> adjustedIndex = <a class="code" href="class_text_manager.html#r0">m_topLine</a> + index - <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a>;
00538     <span class="keywordflow">return</span> adjustedIndex;
00539 }
00540 
<a name="l00549"></a><a class="code" href="class_text_manager.html#a4">00549</a> <span class="keywordtype">int</span> <a class="code" href="class_text_manager.html#a4">TextManager::GetNumLinesScrolled</a>()
00550 {
00551     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r2">m_numLinesScrolledUp</a>;
00552 }
00553 
<a name="l00564"></a><a class="code" href="class_text_manager.html#a13">00564</a> <span class="keywordtype">void</span> <a class="code" href="class_text_manager.html#a13">TextManager::SetMaxSize</a>(<span class="keywordtype">int</span> newSize)
00565 {
00566     <span class="keywordflow">if</span>(newSize &lt; <a class="code" href="class_text_manager.html#r3">m_viewportHeight</a>)
00567     {
00568         <span class="keywordflow">return</span>;
00569     }
00570 
00571     <span class="keywordflow">if</span>(newSize &lt; <a class="code" href="class_text_manager.html#r6">m_maxHeight</a>)
00572     {
00573         <span class="keywordtype">int</span> linesToPitch = <a class="code" href="class_text_manager.html#r6">m_maxHeight</a> - newSize;
00574 
00575         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; linesToPitch; i++)
00576         {
00577             <a class="code" href="class_text_manager.html#r11">m_color</a>.pop_front();
00578             <a class="code" href="class_text_manager.html#r12">m_text</a>.pop_front();
00579         }
00580     }
00581 
00582     <a class="code" href="class_text_manager.html#r6">m_maxHeight</a> = newSize;
00583 }
00584 
00585 
<a name="l00594"></a><a class="code" href="class_text_manager.html#a5">00594</a> <span class="keywordtype">int</span> <a class="code" href="class_text_manager.html#a5">TextManager::GetLinesReceived</a>()
00595 {
00596     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r5">m_linesReceived</a>;
00597 }
00598 
<a name="l00599"></a><a class="code" href="class_text_manager.html#a2">00599</a> <span class="keywordtype">int</span> <a class="code" href="class_text_manager.html#a2">TextManager::GetMaxSize</a>()
00600 {
00601     <span class="keywordflow">return</span> <a class="code" href="class_text_manager.html#r6">m_maxHeight</a>;
00602 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Apr 28 16:45:38 2004 for Chameleon by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
