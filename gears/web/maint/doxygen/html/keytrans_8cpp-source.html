<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Chameleon: keytrans.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>keytrans.cpp</h1><a href="keytrans_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">// Copyright Derry Bryson, 1999</span>
00003 
00004 
00005 <span class="preprocessor">#include "<a class="code" href="gterm_8hpp.html">gterm.hpp</a>"</span>
00006 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
00007 
00008 
00009 <span class="comment">//</span>
00010 <span class="comment">//  Keycode translation tables</span>
00011 <span class="comment">//</span>
<a name="l00012"></a><a class="code" href="class_g_term.html#v10">00012</a> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">GTerm::VTKeySeq</a> <a class="code" href="class_g_term.html#v10">GTerm::cursor_keys</a>[] =
00013 {
00014   { KEY_LEFT, <span class="stringliteral">"\033[D"</span> },
00015   { KEY_UP, <span class="stringliteral">"\033[A"</span> },
00016   { KEY_RIGHT, <span class="stringliteral">"\033[C"</span> },
00017   { KEY_DOWN, <span class="stringliteral">"\033[B"</span> },
00018   { KEY_NUMPAD_LEFT, <span class="stringliteral">"\033[D"</span> },
00019   { KEY_NUMPAD_UP, <span class="stringliteral">"\033[A"</span> },
00020   { KEY_NUMPAD_RIGHT, <span class="stringliteral">"\033[C"</span> },
00021   { KEY_NUMPAD_DOWN, <span class="stringliteral">"\033[B"</span> },
00022   { KEY_NULL, 0 }
00023 };
00024 
<a name="l00025"></a><a class="code" href="class_g_term.html#v11">00025</a> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">GTerm::VTKeySeq</a> <a class="code" href="class_g_term.html#v11">GTerm::cursor_app_keys</a>[] =
00026 {
00027   { KEY_LEFT, <span class="stringliteral">"\033OD"</span> },
00028   { KEY_UP, <span class="stringliteral">"\033OA"</span> },
00029   { KEY_RIGHT, <span class="stringliteral">"\033OC"</span> },
00030   { KEY_DOWN, <span class="stringliteral">"\033OB"</span> },
00031   { KEY_NUMPAD_LEFT, <span class="stringliteral">"\033OD"</span> },
00032   { KEY_NUMPAD_UP, <span class="stringliteral">"\033OA"</span> },
00033   { KEY_NUMPAD_RIGHT, <span class="stringliteral">"\033OC"</span> },
00034   { KEY_NUMPAD_DOWN, <span class="stringliteral">"\033OB"</span> },
00035   { KEY_NULL, 0 }
00036 };
00037 
<a name="l00038"></a><a class="code" href="class_g_term.html#v12">00038</a> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">GTerm::VTKeySeq</a> <a class="code" href="class_g_term.html#v12">GTerm::keypad_keys</a>[] =
00039 {
00040   { KEY_NUMPAD_DIVIDE, <span class="stringliteral">"/"</span> },
00041   { KEY_NUMPAD_MULTIPLY, <span class="stringliteral">"*"</span> },
00042   { KEY_NUMPAD_SUBTRACT, <span class="stringliteral">"-"</span> },
00043   { KEY_NUMPAD_HOME, <span class="stringliteral">"\033[\000"</span> },
00044   { KEY_NUMPAD7, <span class="stringliteral">"7"</span> },
00045   { KEY_NUMPAD8, <span class="stringliteral">"8"</span> },
00046   { KEY_NUMPAD_PAGEUP, <span class="stringliteral">"\033[5~"</span> },
00047   { KEY_NUMPAD9, <span class="stringliteral">"9"</span> },
00048   { KEY_NUMPAD_ADD, <span class="stringliteral">"+"</span> },
00049   { KEY_NUMPAD4, <span class="stringliteral">"4"</span> },
00050   { KEY_NUMPAD_BEGIN, <span class="stringliteral">"\033[s"</span> },
00051   { KEY_NUMPAD5, <span class="stringliteral">"5"</span> },
00052   { KEY_NUMPAD6, <span class="stringliteral">"6"</span> },
00053   { KEY_NUMPAD_END, <span class="stringliteral">"\033[e"</span> },
00054   { KEY_NUMPAD1, <span class="stringliteral">"1"</span> },
00055   { KEY_NUMPAD2, <span class="stringliteral">"2"</span> },
00056   { KEY_NUMPAD_PAGEDOWN, <span class="stringliteral">"\033[6~"</span> },
00057   { KEY_NUMPAD3, <span class="stringliteral">"3"</span> },
00058   { KEY_NUMPAD_INSERT, <span class="stringliteral">"\033[2~"</span> },
00059   { KEY_NUMPAD0, <span class="stringliteral">"0"</span> },
00060   { KEY_NUMPAD_DELETE, <span class="stringliteral">"\033[3~"</span> },
00061   { KEY_NUMPAD_DECIMAL, <span class="stringliteral">"."</span> },
00062   { KEY_NUMPAD_ENTER, <span class="stringliteral">"\r"</span> },
00063   { KEY_NULL, 0 }
00064 };
00065 
<a name="l00066"></a><a class="code" href="class_g_term.html#v13">00066</a> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">GTerm::VTKeySeq</a> <a class="code" href="class_g_term.html#v13">GTerm::keypad_app_keys</a>[] =
00067 {
00068   { KEY_NUMPAD_DIVIDE, <span class="stringliteral">"\033Oo"</span> },
00069   { KEY_NUMPAD_MULTIPLY, <span class="stringliteral">"\033Oj"</span> },
00070   { KEY_NUMPAD_SUBTRACT, <span class="stringliteral">"\033Om"</span> },
00071   { KEY_NUMPAD_HOME, <span class="stringliteral">"\033[\000"</span> },
00072   { KEY_NUMPAD7, <span class="stringliteral">"\033Ow"</span> },
00073   { KEY_NUMPAD8, <span class="stringliteral">"\033Ox"</span> },
00074   { KEY_NUMPAD_PAGEUP, <span class="stringliteral">"\033[5~"</span> },
00075   { KEY_NUMPAD9, <span class="stringliteral">"\033Oy"</span> },
00076   { KEY_NUMPAD_ADD, <span class="stringliteral">"\033Ok"</span> },
00077   { KEY_NUMPAD4, <span class="stringliteral">"\033Ot"</span> },
00078   { KEY_NUMPAD_BEGIN, <span class="stringliteral">"\033[s"</span> },
00079   { KEY_NUMPAD5, <span class="stringliteral">"\033Ou"</span> },
00080   { KEY_NUMPAD6, <span class="stringliteral">"\033Ov"</span> },
00081   { KEY_NUMPAD_END, <span class="stringliteral">"\033[e"</span> },
00082   { KEY_NUMPAD1, <span class="stringliteral">"\033Oq"</span> },
00083   { KEY_NUMPAD2, <span class="stringliteral">"\033Or"</span> },
00084   { KEY_NUMPAD_PAGEDOWN, <span class="stringliteral">"\033[6~"</span> },
00085   { KEY_NUMPAD3, <span class="stringliteral">"\033Os"</span> },
00086   { KEY_NUMPAD_INSERT, <span class="stringliteral">"\033[2~"</span> },
00087   { KEY_NUMPAD0, <span class="stringliteral">"\033Op"</span> },
00088   { KEY_NUMPAD_DELETE, <span class="stringliteral">"\033[3~"</span> },
00089   { KEY_NUMPAD_DECIMAL, <span class="stringliteral">"\033On"</span> },
00090   { KEY_NUMPAD_ENTER, <span class="stringliteral">"\033OM"</span> },
00091   { KEY_NULL, 0 }
00092 };
00093 
<a name="l00094"></a><a class="code" href="class_g_term.html#v14">00094</a> <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">GTerm::VTKeySeq</a> <a class="code" href="class_g_term.html#v14">GTerm::other_keys</a>[] =
00095 {
00096   { KEY_HOME, <span class="stringliteral">"\033[\000"</span> },
00097   { KEY_PAGEUP, <span class="stringliteral">"\033[5~"</span> },
00098   { KEY_PRIOR, <span class="stringliteral">"\033[5~"</span> },
00099   { KEY_PAGEDOWN, <span class="stringliteral">"\033[6~"</span>},
00100   { KEY_NEXT, <span class="stringliteral">"\033[6~"</span> },
00101   { KEY_END, <span class="stringliteral">"\033[e"</span> },
00102   { KEY_INSERT, <span class="stringliteral">"\033[2~"</span> },
00103   { KEY_F1, <span class="stringliteral">"\033[11~"</span> },
00104   { KEY_F2, <span class="stringliteral">"\033[12~"</span> },
00105   { KEY_F3, <span class="stringliteral">"\033[13~"</span> },
00106   { KEY_F4, <span class="stringliteral">"\033[14~"</span> },
00107   { KEY_F5, <span class="stringliteral">"\033[15~"</span> },
00108   { KEY_F6, <span class="stringliteral">"\033[17~"</span> },
00109   { KEY_F7, <span class="stringliteral">"\033[18~"</span> },
00110   { KEY_F8, <span class="stringliteral">"\033[19~"</span> },
00111   { KEY_F9, <span class="stringliteral">"\033[20~"</span> },
00112   { KEY_F10, <span class="stringliteral">"\033[21~"</span> },
00113   { KEY_F11, <span class="stringliteral">"\033[23~"</span> },
00114   { KEY_F12, <span class="stringliteral">"\033[24~"</span> },
00115   { KEY_RETURN, <span class="stringliteral">"\r"</span> },
00116   { KEY_SPACE, <span class="stringliteral">" "</span> },
00117   { KEY_BACK, <span class="stringliteral">"\x8"</span> },
00118   { KEY_ESCAPE, <span class="stringliteral">"\x1b"</span> },
00119   { KEY_TAB, <span class="stringliteral">"\x9"</span> },
00120   { KEY_DELETE, <span class="stringliteral">"\x7f"</span> },
00121   { KEY_NULL, 0 }
00122 };
00123 
00124 <span class="preprocessor">#ifdef GTERM_PC</span>
<a name="l00125"></a><a class="code" href="class_g_term.html#v15">00125</a> <span class="preprocessor"></span><a class="code" href="struct_g_term_1_1_p_c_key_seq.html">GTerm::PCKeySeq</a> <a class="code" href="class_g_term.html#v15">GTerm::pc_keys</a>[] =
00126 {
00127   { <span class="charliteral">'0'</span>, 0x0030, 0x0029, 0x0000, 0x8100 },
00128   { <span class="charliteral">'1'</span>, 0x0031, 0x0021, 0x0000, 0x7800 },
00129   { <span class="charliteral">'2'</span>, 0x0032, 0x0040, 0x0000, 0x7900 },
00130   { <span class="charliteral">'3'</span>, 0x0033, 0x0023, 0x0000, 0x7a00 },
00131   { <span class="charliteral">'4'</span>, 0x0034, 0x0024, 0x0000, 0x7b00 },
00132   { <span class="charliteral">'5'</span>, 0x0035, 0x0025, 0x0000, 0x7c00 },
00133   { <span class="charliteral">'6'</span>, 0x0036, 0x005e, 0x0000, 0x7d00 },
00134   { <span class="charliteral">'7'</span>, 0x0037, 0x0026, 0x0000, 0x7e00 },
00135   { <span class="charliteral">'8'</span>, 0x0038, 0x002a, 0x0000, 0x7f00 },
00136   { <span class="charliteral">'9'</span>, 0x0039, 0x0028, 0x0000, 0x8000 },
00137 
00138   { <span class="charliteral">')'</span>, 0x0030, 0x0029, 0x0000, 0x8100 },
00139   { <span class="charliteral">'!'</span>, 0x0031, 0x0021, 0x0000, 0x7800 },
00140   { <span class="charliteral">'@'</span>, 0x0032, 0x0040, 0x0000, 0x7900 },
00141   { <span class="charliteral">'#'</span>, 0x0033, 0x0023, 0x0000, 0x7a00 },
00142   { <span class="charliteral">'$'</span>, 0x0034, 0x0024, 0x0000, 0x7b00 },
00143   { <span class="charliteral">'%'</span>, 0x0035, 0x0025, 0x0000, 0x7c00 },
00144   { <span class="charliteral">'^'</span>, 0x0036, 0x005e, 0x0000, 0x7d00 },
00145   { <span class="charliteral">'&amp;'</span>, 0x0037, 0x0026, 0x0000, 0x7e00 },
00146   { <span class="charliteral">'*'</span>, 0x0038, 0x002a, 0x0000, 0x7f00 },
00147   { <span class="charliteral">'('</span>, 0x0039, 0x0028, 0x0000, 0x8000 },
00148 
00149   { <span class="charliteral">'a'</span>, 0x0061, 0x0041, 0x0001, 0x1e00 },
00150   { <span class="charliteral">'b'</span>, 0x0062, 0x0042, 0x0002, 0x3000 },
00151   { <span class="charliteral">'c'</span>, 0x0063, 0x0043, 0x0003, 0x2e00 },
00152   { <span class="charliteral">'d'</span>, 0x0064, 0x0044, 0x0004, 0x2000 },
00153   { <span class="charliteral">'e'</span>, 0x0065, 0x0045, 0x0005, 0x1200 },
00154   { <span class="charliteral">'f'</span>, 0x0066, 0x0046, 0x0006, 0x2100 },
00155   { <span class="charliteral">'g'</span>, 0x0067, 0x0047, 0x0007, 0x2200 },
00156   { <span class="charliteral">'h'</span>, 0x0068, 0x0048, 0x0008, 0x2300 },
00157   { <span class="charliteral">'i'</span>, 0x0069, 0x0049, 0x0009, 0x1700 },
00158   { <span class="charliteral">'j'</span>, 0x006a, 0x004a, 0x000a, 0x2400 },
00159   { <span class="charliteral">'k'</span>, 0x006b, 0x004b, 0x000b, 0x2500 },
00160   { <span class="charliteral">'l'</span>, 0x006c, 0x004c, 0x000c, 0x2600 },
00161   { <span class="charliteral">'m'</span>, 0x006d, 0x004d, 0x000d, 0x3200 },
00162   { <span class="charliteral">'n'</span>, 0x006e, 0x004e, 0x000e, 0x3100 },
00163   { <span class="charliteral">'o'</span>, 0x006f, 0x004f, 0x000f, 0x1800 },
00164   { <span class="charliteral">'p'</span>, 0x0070, 0x0050, 0x0010, 0x1900 },
00165   { <span class="charliteral">'q'</span>, 0x0071, 0x0051, 0xff91, 0x1000 },
00166   { <span class="charliteral">'r'</span>, 0x0072, 0x0052, 0x0012, 0x1300 },
00167   { <span class="charliteral">'s'</span>, 0x0073, 0x0053, 0xff93, 0x1f00 },
00168   { <span class="charliteral">'t'</span>, 0x0074, 0x0054, 0x0014, 0x1400 },
00169   { <span class="charliteral">'u'</span>, 0x0075, 0x0055, 0x0015, 0x1600 },
00170   { <span class="charliteral">'v'</span>, 0x0076, 0x0056, 0x0016, 0x2f00 },
00171   { <span class="charliteral">'w'</span>, 0x0077, 0x0057, 0x0017, 0x1100 },
00172   { <span class="charliteral">'x'</span>, 0x0078, 0x0058, 0x0018, 0x2d00 },
00173   { <span class="charliteral">'y'</span>, 0x0079, 0x0059, 0x0019, 0x1500 },
00174   { <span class="charliteral">'z'</span>, 0x007a, 0x005a, 0x001a, 0x2c00 },
00175 
00176   { <span class="charliteral">'`'</span>, 0x0060, 0x007e, 0x0000, 0x0000 },
00177   { <span class="charliteral">'~'</span>, 0x0060, 0x007e, 0x0000, 0x0000 },
00178   { <span class="charliteral">'-'</span>, 0x002d, 0x005f, 0x0000, 0x0000 },
00179   { <span class="charliteral">'_'</span>, 0x002d, 0x005f, 0x0000, 0x0000 },
00180   { <span class="charliteral">'='</span>, 0x003d, 0x002b, 0x0000, 0x0000 },
00181   { <span class="charliteral">'+'</span>, 0x003d, 0x002b, 0x0000, 0x0000 },
00182   { <span class="charliteral">','</span>, 0x002c, 0x003c, 0x0000, 0x0000 },
00183   { <span class="charliteral">'&lt;'</span>, 0x002c, 0x003c, 0x0000, 0x0000 },
00184   { <span class="charliteral">'.'</span>, 0x002e, 0x003e, 0x0000, 0x0000 },
00185   { <span class="charliteral">'&gt;'</span>, 0x002e, 0x003e, 0x0000, 0x0000 },
00186   { <span class="charliteral">';'</span>, 0x003b, 0x003a, 0x0000, 0x0000 },
00187   { <span class="charliteral">':'</span>, 0x003b, 0x003a, 0x0000, 0x0000 },
00188   { <span class="charliteral">'\''</span>, 0x002c, 0x0022, 0x0000, 0x0000 },
00189   { <span class="charliteral">'"'</span>, 0x002c, 0x0022, 0x0000, 0x0000 },
00190   { <span class="charliteral">'['</span>, 0x005b, 0x007b, 0x0000, 0x0000 },
00191   { <span class="charliteral">'{'</span>, 0x005b, 0x007b, 0x0000, 0x0000 },
00192   { <span class="charliteral">']'</span>, 0x005d, 0x007d, 0x0000, 0x0000 },
00193   { <span class="charliteral">'}'</span>, 0x005d, 0x007d, 0x0000, 0x0000 },
00194   { <span class="charliteral">'\\'</span>, 0x005c, 0x007c, 0x0000, 0x0000 },
00195   { <span class="charliteral">'|'</span>, 0x005c, 0x007c, 0x0000, 0x0000 },
00196   { <span class="charliteral">'/'</span>, 0x002f, 0x003f, 0x0000, 0x0000 },
00197   { <span class="charliteral">'?'</span>, 0x002f, 0x003f, 0x0000, 0x0000 },
00198 
00199   { KEY_BACK, 0x0008, 0x0008, 0x007f, 0x0000 },
00200   { KEY_TAB, 0x0009, 0x0f00, 0x0000, 0x0000 },
00201   { KEY_RETURN, 0x000d, 0x000d, 0x000a, 0x0000 },
00202   { KEY_ESCAPE, 0x001b, 0x001b, 0x001b, 0x0000 },
00203   { KEY_SPACE, 0x0020, 0x0020, 0x0000, 0x0000 },
00204   { KEY_LEFT, 0x4b00, 0x0034, 0x7300, 0xb200 },
00205   { KEY_UP, 0x4800, 0x0038, 0xa000, 0xaf00 },
00206   { KEY_RIGHT, 0x4d00, 0x0036, 0x7400, 0xb400 },
00207   { KEY_DOWN, 0x5000, 0x0032, 0xa400, 0xb700 },
00208   { KEY_NUMPAD_LEFT, 0x4b00, 0x0034, 0x7300, 0xb200 },
00209   { KEY_NUMPAD_UP, 0x4800, 0x0038, 0xa000, 0xaf00 },
00210   { KEY_NUMPAD_RIGHT, 0x4d00, 0x0036, 0x7400, 0xb400 },
00211   { KEY_NUMPAD_DOWN, 0x5000, 0x0032, 0xa400, 0xb700 },
00212   { KEY_DIVIDE, 0x002f, 0x002f, 0x0000, 0x0000 },
00213   { KEY_MULTIPLY, 0x0038, 0x0038, 0x0000, 0x7f00 },
00214   { KEY_SUBTRACT, 0x002d, 0x002d, 0x0000, 0x0000 },
00215   { KEY_ADD, 0x003d, 0x003d, 0x0000, 0x0000 },
00216   { KEY_HOME, 0x4700, 0x0037, 0x7700, 0xae00 },
00217   { KEY_END, 0x4f00, 0x0031, 0x7500, 0xb600 },
00218   { KEY_PAGEUP, 0x4900, 0x0039, 0x8400, 0xb000 },
00219   { KEY_PAGEDOWN, 0x5100, 0x0033, 0x7600, 0xb800 },
00220   { KEY_INSERT, 0x5200, 0x0030, 0xa500, 0xb900 },
00221   { KEY_DELETE, 0x5300, 0x002e, 0xa600, 0xba00 },
00222   { KEY_ENTER, 0x000d, 0x000d, 0x000a, 0x0000 },
00223   { KEY_NEXT, 0x5100, 0x0033, 0x7600, 0xb800 },
00224   { KEY_PRIOR, 0x4900, 0x0039, 0x8400, 0xb000 },
00225 
00226   { KEY_NUMPAD0, 0x0030, 0x0029, 0x0000, 0x8100 },
00227   { KEY_NUMPAD1, 0x0031, 0x0021, 0x0000, 0x7800 },
00228   { KEY_NUMPAD2, 0x0032, 0x0040, 0x0000, 0x7900 },
00229   { KEY_NUMPAD3, 0x0033, 0x0023, 0x0000, 0x7a00 },
00230   { KEY_NUMPAD4, 0x0034, 0x0024, 0x0000, 0x7b00 },
00231   { KEY_NUMPAD5, 0x0035, 0x0025, 0x0000, 0x7c00 },
00232   { KEY_NUMPAD6, 0x0036, 0x005e, 0x0000, 0x7d00 },
00233   { KEY_NUMPAD7, 0x0037, 0x0026, 0x0000, 0x7e00 },
00234   { KEY_NUMPAD8, 0x0038, 0x002a, 0x0000, 0x7f00 },
00235   { KEY_NUMPAD9, 0x0039, 0x0028, 0x0000, 0x8000 },
00236 
00237   { KEY_F1, 0x3b00, 0x5400, 0x5e00, 0x6800 },
00238   { KEY_F2, 0x3c00, 0x5500, 0x5f00, 0x6900 },
00239   { KEY_F3, 0x3d00, 0x5600, 0x6000, 0x6a00 },
00240   { KEY_F4, 0x3e00, 0x5700, 0x6100, 0x6b00 },
00241   { KEY_F5, 0x3f00, 0x5800, 0x6200, 0x6c00 },
00242   { KEY_F6, 0x4000, 0x5900, 0x6300, 0x6d00 },
00243   { KEY_F7, 0x4100, 0x5a00, 0x6400, 0x6e00 },
00244   { KEY_F8, 0x4200, 0x5b00, 0x6500, 0x6f00 },
00245   { KEY_F9, 0x4300, 0x5c00, 0x6600, 0x7000 },
00246   { KEY_F10, 0x4400, 0x5d00, 0x6700, 0x7100 },
00247   { KEY_F11, 0x0000, 0x0000, 0x0000, 0x0000 },
00248   { KEY_F12, 0x0000, 0x0000, 0x0000, 0x0000 },
00249   { KEY_NULL, 0, 0, 0, 0 }
00250 };
00251 <span class="preprocessor">#endif // GTERM_PC</span>
00252 <span class="preprocessor"></span>
00253 <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">GTerm::VTKeySeq</a> *
<a name="l00254"></a><a class="code" href="class_g_term.html#d0">00254</a> <a class="code" href="class_g_term.html#d0">GTerm::translate_vt_keycode</a>(<span class="keywordtype">int</span> keyCode, <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a> *table)
00255 {
00256   <span class="keywordflow">while</span>(table-&gt;<a class="code" href="struct_g_term_1_1_v_t_key_seq.html#o0">keyCode</a> != <a class="code" href="class_g_term.html#w80w17">KEY_NULL</a>)
00257   {
00258     <span class="keywordflow">if</span>(table-&gt;<a class="code" href="struct_g_term_1_1_v_t_key_seq.html#o0">keyCode</a> == keyCode)
00259       <span class="keywordflow">return</span> table;
00260     table++;
00261   }
00262   <span class="keywordflow">return</span> 0;
00263 }
00264 
00265 <span class="preprocessor">#ifdef GTERM_PC</span>
00266 <span class="preprocessor"></span><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>
<a name="l00267"></a><a class="code" href="class_g_term.html#d1">00267</a> <a class="code" href="class_g_term.html#d1">GTerm::translate_pc_keycode</a>(<span class="keywordtype">int</span> keyCode, <span class="keywordtype">int</span> shift, <span class="keywordtype">int</span> ctrl, <span class="keywordtype">int</span> alt)
00268 {
00269   <span class="keywordtype">int</span>
00270     i;
00271 
00272   <span class="keywordflow">if</span>(keyCode &lt; 1000)
00273   {
00274     <span class="keywordflow">if</span>(isupper(keyCode))
00275     {
00276       <span class="keywordflow">if</span>(!alt)
00277         shift = 1;
00278       keyCode = tolower(keyCode);
00279     }
00280 
00281     <span class="keywordflow">if</span>(iscntrl(keyCode))
00282     {
00283       ctrl = 1;
00284       keyCode = keyCode + <span class="charliteral">'a'</span> - 1;
00285     }
00286   }
00287 
00288 <span class="comment">//printf("looking for %d...", keyCode);</span>
00289   <span class="keywordflow">for</span>(i = 0; <a class="code" href="class_g_term.html#v15">pc_keys</a>[i].<a class="code" href="struct_g_term_1_1_p_c_key_seq.html#o0">keyCode</a>; i++)
00290   {
00291     <span class="keywordflow">if</span>(keyCode == <a class="code" href="class_g_term.html#v15">pc_keys</a>[i].<a class="code" href="struct_g_term_1_1_p_c_key_seq.html#o0">keyCode</a>)
00292     {
00293 <span class="comment">//printf("found!\n");</span>
00294       <span class="keywordflow">if</span>(shift)
00295         <span class="keywordflow">return</span> pc_keys[i].shiftSeq;
00296       <span class="keywordflow">if</span>(ctrl)
00297         <span class="keywordflow">return</span> pc_keys[i].ctrlSeq;
00298       <span class="keywordflow">if</span>(alt)
00299         <span class="keywordflow">return</span> pc_keys[i].altSeq;
00300       <span class="keywordflow">return</span> pc_keys[i].normSeq;
00301     }
00302   }
00303 <span class="comment">//printf("not found!\n");</span>
00304   <span class="keywordflow">return</span> 0;
00305 }
00306 <span class="preprocessor">#endif // GTERM_PC</span>
00307 <span class="preprocessor"></span>
00308 <span class="keywordtype">int</span>
<a name="l00309"></a><a class="code" href="class_g_term.html#a32">00309</a> <a class="code" href="class_g_term.html#a32">GTerm::TranslateKeyCode</a>(<span class="keywordtype">int</span> keyCode, <span class="keywordtype">int</span> *len, <span class="keywordtype">char</span> *data, <span class="keywordtype">int</span> shift,
00310                         <span class="keywordtype">int</span> ctrl, <span class="keywordtype">int</span> alt)
00311 {
00312   <span class="keywordtype">int</span>
00313     mode = <a class="code" href="class_g_term.html#a19">GetMode</a>();
00314 
00315 <span class="preprocessor">#ifdef GTERM_PC</span>
00316 <span class="preprocessor"></span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>
00317     pcKeySeq;
00318 <span class="preprocessor">#endif // GTERM_PC</span>
00319 <span class="preprocessor"></span>
00320   <a class="code" href="struct_g_term_1_1_v_t_key_seq.html">VTKeySeq</a>
00321     *keySeq;
00322 
00323 <span class="comment">//printf("keycode = %d, shift = %d, ctrl = %d, alt = %d\n", keyCode, shift, ctrl, alt);</span>
00324 <span class="comment">//printf("GTerm::TranslateKeyCode(): mode = %x\n", mode);</span>
00325 <span class="preprocessor">#ifdef GTERM_PC</span>
00326 <span class="preprocessor"></span>  <span class="keywordflow">if</span>(mode &amp; <a class="code" href="class_g_term.html#w79w15">PC</a>)
00327   {
00328     pcKeySeq = <a class="code" href="class_g_term.html#d1">translate_pc_keycode</a>(keyCode, shift, ctrl, alt);
00329     <span class="keywordflow">if</span>(pcKeySeq)
00330     {
00331 <span class="comment">//printf("keySeq = %x\n", pcKeySeq);</span>
00332       *(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)data++ = pcKeySeq &gt;&gt; 8;
00333       *(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)data = pcKeySeq &amp; 0xff;
00334       *len = 2;
00335       <span class="keywordflow">return</span> 1;
00336     }
00337     <span class="keywordflow">return</span> 0;
00338   }
00339   <span class="keywordflow">else</span>
00340   {
00341 <span class="preprocessor">#endif // GTERM_PC</span>
00342 <span class="preprocessor"></span><span class="comment">//printf("mode = %x\n", mode);</span>
00343     <span class="keywordflow">if</span>(mode &amp; <a class="code" href="class_g_term.html#w79w9">KEYAPPMODE</a>)
00344     {
00345 <span class="comment">//printf("KEYAPPMODE\n");</span>
00346       keySeq = <a class="code" href="class_g_term.html#d0">translate_vt_keycode</a>(keyCode, <a class="code" href="class_g_term.html#v13">keypad_app_keys</a>);
00347     }
00348     <span class="keywordflow">else</span>
00349       keySeq = <a class="code" href="class_g_term.html#d0">translate_vt_keycode</a>(keyCode, <a class="code" href="class_g_term.html#v12">keypad_keys</a>);
00350 
00351     <span class="keywordflow">if</span>(!keySeq)
00352     {
00353       <span class="keywordflow">if</span>(mode &amp; <a class="code" href="class_g_term.html#w79w5">CURSORAPPMODE</a>)
00354       {
00355 <span class="comment">//printf("CURSORAPPMODE\n");</span>
00356         keySeq = <a class="code" href="class_g_term.html#d0">translate_vt_keycode</a>(keyCode, <a class="code" href="class_g_term.html#v11">cursor_app_keys</a>);
00357 <span class="comment">//printf("keySeq = %08x\n", keySeq);</span>
00358       }
00359       <span class="keywordflow">else</span>
00360         keySeq = <a class="code" href="class_g_term.html#d0">translate_vt_keycode</a>(keyCode, <a class="code" href="class_g_term.html#v10">cursor_keys</a>);
00361     }
00362 
00363     <span class="keywordflow">if</span>(!keySeq)
00364       keySeq = <a class="code" href="class_g_term.html#d0">translate_vt_keycode</a>(keyCode, <a class="code" href="class_g_term.html#v14">other_keys</a>);
00365 
00366     <span class="keywordflow">if</span>(keySeq)
00367     {
00368       *len = strlen(keySeq-&gt;<a class="code" href="struct_g_term_1_1_v_t_key_seq.html#o1">seq</a>);
00369       strcpy(data, keySeq-&gt;<a class="code" href="struct_g_term_1_1_v_t_key_seq.html#o1">seq</a>);
00370       <span class="keywordflow">return</span> 1;
00371     }
00372     <span class="keywordflow">return</span> 0;
00373 <span class="preprocessor">#ifdef GTERM_PC</span>
00374 <span class="preprocessor"></span>  }
00375 <span class="preprocessor">#endif // GTERM_PC</span>
00376 <span class="preprocessor"></span>}
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Apr 28 16:45:38 2004 for Chameleon by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
