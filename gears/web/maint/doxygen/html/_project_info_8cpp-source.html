<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Chameleon: ProjectInfo.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>ProjectInfo.cpp</h1><a href="_project_info_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre><a name="l00001"></a><a class="code" href="_project_info_8cpp.html#a0">00001</a> <span class="preprocessor">#define CRTDBG_MAP_ALLOC</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00003 <span class="preprocessor">#include &lt;crtdbg.h&gt;</span>
00004 
00005 <span class="preprocessor">#include "<a class="code" href="_project_info_8h.html">ProjectInfo.h</a>"</span>
00006 <span class="preprocessor">#include "../editor/editor.h"</span>
00007 <span class="preprocessor">#include "<a class="code" href="debug_8h.html">debug.h</a>"</span>
00008 
00009 <span class="preprocessor">#ifdef _DEBUG</span>
00010 <span class="preprocessor"></span><span class="preprocessor">#define new DEBUG_NEW</span>
00011 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00012 <span class="preprocessor"></span>
<a name="l00013"></a><a class="code" href="class_project_info.html#a0">00013</a> <a class="code" href="class_project_info.html#a0">ProjectInfo::ProjectInfo</a>(<span class="keywordtype">bool</span> singleFile <span class="comment">/* = true */</span>)
00014 {
00015     <a class="code" href="class_project_info.html#r8">m_isSingleFile</a> = singleFile;
00016     <a class="code" href="class_project_info.html#r9">m_isCompiled</a> = <span class="keyword">false</span>;
00017     <a class="code" href="class_project_info.html#r11">m_isReadOnly</a> = <span class="keyword">false</span>;
00018     <span class="comment">//m_relativePaths = true;</span>
00019     <span class="comment">// isRemote will be set by the creator immediately upon instantiation</span>
00020     <span class="comment">// in fact, it could almost go in the constructor...</span>
00021     <a class="code" href="class_project_info.html#r7">m_isRemote</a> = <span class="keyword">true</span>;
00022     <a class="code" href="class_project_info.html#r10">m_isBeingCompiled</a> = <span class="keyword">false</span>;
00023     <a class="code" href="class_project_info.html#r12">m_projectName</a> = <span class="stringliteral">"Chameleon"</span>; <span class="comment">// &lt;-- ha ha, just a default</span>
00024 
00025     <span class="keywordflow">if</span>(singleFile) {
00026         <span class="comment">//set some defaults</span>
00027         <span class="comment">//m_headerFiles = wxArrayString;</span>
00028         <span class="comment">//m_sourceFiles = wxArrayString;</span>
00029         <span class="comment">//m_libraryFiles = wxArrayString;</span>
00030         <span class="comment">//m_headersEnabled = BoolArray;</span>
00031         <span class="comment">//m_sourcesEnabled = BoolArray;</span>
00032         <span class="comment">//m_librariesEnabled = BoolArray;</span>
00033         <span class="comment">//m_edPointers = EditorPointerArray;</span>
00034         <span class="comment">//m_projectBasePath = "";</span>
00035         <span class="comment">//m_executableName = wxFileName;</span>
00036     }
00037 }
00038 
<a name="l00049"></a><a class="code" href="class_project_info.html#a30">00049</a> <span class="keywordtype">void</span> <a class="code" href="class_project_info.html#a30">ProjectInfo::SetProjectFile</a>(wxFileName projfile) {
00050     <a class="code" href="class_project_info.html#r13">m_projectFile</a> = projfile;
00051     <span class="comment">//if(m_projectName == "") {</span>
00052         <a class="code" href="class_project_info.html#a29">SetProjectName</a>(projfile.GetName());
00053     <span class="comment">//}</span>
00054 }
00055 
<a name="l00064"></a><a class="code" href="class_project_info.html#a21">00064</a> wxString <a class="code" href="class_project_info.html#a21">ProjectInfo::GetProjectBasePath</a>() {
00065     <span class="comment">// path is based on file 1, if it's a single file project, or the project</span>
00066     <span class="comment">//    file itself.</span>
00067     wxFileName f = <a class="code" href="class_project_info.html#r8">m_isSingleFile</a> ? wxFileName(<a class="code" href="class_project_info.html#r1">m_sourceFiles</a>[0]) : <a class="code" href="class_project_info.html#r13">m_projectFile</a>;
00068     
00069     <span class="keywordflow">return</span> f.GetPath(wxPATH_GET_VOLUME | wxPATH_GET_SEPARATOR,
00070                                 <a class="code" href="class_project_info.html#r7">m_isRemote</a> ? wxPATH_UNIX : wxPATH_DOS);
00071 }
00072 
<a name="l00080"></a><a class="code" href="class_project_info.html#a19">00080</a> wxString <a class="code" href="class_project_info.html#a19">ProjectInfo::GetProjectName</a>() {
00081     <span class="keywordflow">if</span>(<a class="code" href="class_project_info.html#r8">m_isSingleFile</a>) {
00082         wxFileName file(<a class="code" href="class_project_info.html#r1">m_sourceFiles</a>[0]);
00083         <span class="keywordflow">return</span> file.GetName();
00084     }
00085     <span class="keywordflow">else</span> {
00086         <span class="keywordflow">return</span> <a class="code" href="class_project_info.html#r12">m_projectName</a>;
00087     }
00088 }
00089 
00090 
<a name="l00101"></a><a class="code" href="class_project_info.html#a1">00101</a> <span class="keywordtype">bool</span> <a class="code" href="class_project_info.html#a1">ProjectInfo::FileExistsInProject</a>(wxString filename)
00102 {
00103     <span class="keywordtype">bool</span> fileInProject = <span class="keyword">false</span>;
00104 
00105     <span class="keywordflow">if</span>(<a class="code" href="class_project_info.html#r0">m_headerFiles</a>.Index(filename) != -1)
00106     {
00107         fileInProject = <span class="keyword">true</span>;
00108     }
00109     <span class="keywordflow">if</span>(<a class="code" href="class_project_info.html#r1">m_sourceFiles</a>.Index(filename) != -1)
00110     {
00111         fileInProject = <span class="keyword">true</span>;
00112     }
00113     <span class="keywordflow">if</span>(<a class="code" href="class_project_info.html#r2">m_libraryFiles</a>.Index(filename) != -1)
00114     {
00115         fileInProject = <span class="keyword">true</span>;
00116     }
00117 
00118     <span class="keywordflow">return</span> fileInProject;
00119 }
00120 
<a name="l00131"></a><a class="code" href="class_project_info.html#d0">00131</a> wxArrayString* <a class="code" href="class_project_info.html#d0">ProjectInfo::SelectStringArray</a>(FileFilterType filterType)
00132 {
00133     <span class="keywordflow">switch</span>(filterType)
00134     {
00135     <span class="keywordflow">case</span> <a class="code" href="datastructures_8h.html#a156a132">FILE_SOURCES</a>:
00136         <span class="keywordflow">return</span> &amp;<a class="code" href="class_project_info.html#r1">m_sourceFiles</a>;
00137     <span class="keywordflow">case</span> <a class="code" href="datastructures_8h.html#a156a133">FILE_HEADERS</a>:
00138         <span class="keywordflow">return</span> &amp;<a class="code" href="class_project_info.html#r0">m_headerFiles</a>;
00139     <span class="keywordflow">case</span> <a class="code" href="datastructures_8h.html#a156a131">FILE_LIBRARIES</a>:
00140         <span class="keywordflow">return</span> &amp;<a class="code" href="class_project_info.html#r2">m_libraryFiles</a>;
00141     }
00142     <span class="comment">// shouldn't ever get here, just eliminating the "not all code paths</span>
00143     <span class="comment">// return a value" warning</span>
00144     <span class="keywordflow">return</span> <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00145 }
00146 
<a name="l00157"></a><a class="code" href="class_project_info.html#d1">00157</a> BoolArray* <a class="code" href="class_project_info.html#d1">ProjectInfo::SelectBoolArray</a>(FileFilterType filterType)
00158 {
00159     <span class="keywordflow">switch</span>(filterType)
00160     {
00161     <span class="keywordflow">case</span> <a class="code" href="datastructures_8h.html#a156a132">FILE_SOURCES</a>:
00162         <span class="keywordflow">return</span> &amp;<a class="code" href="class_project_info.html#r4">m_sourcesEnabled</a>;
00163     <span class="keywordflow">case</span> <a class="code" href="datastructures_8h.html#a156a133">FILE_HEADERS</a>:
00164         <span class="keywordflow">return</span> &amp;<a class="code" href="class_project_info.html#r3">m_headersEnabled</a>;
00165     <span class="keywordflow">case</span> <a class="code" href="datastructures_8h.html#a156a131">FILE_LIBRARIES</a>:
00166         <span class="keywordflow">return</span> &amp;<a class="code" href="class_project_info.html#r5">m_librariesEnabled</a>;
00167     }
00168     <span class="comment">// shouldn't ever get here</span>
00169     <span class="keywordflow">return</span> <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00170 }
00171 
<a name="l00183"></a><a class="code" href="class_project_info.html#a2">00183</a> <span class="keywordtype">void</span> <a class="code" href="class_project_info.html#a2">ProjectInfo::AddFileToProject</a>(wxString filename, FileFilterType filterType)
00184 {
00185     <span class="keywordflow">if</span>(<a class="code" href="class_project_info.html#a1">FileExistsInProject</a>(filename)) {
00186         wxLogDebug(<span class="stringliteral">"Tried adding a file that's already in the file."</span>);
00187         <span class="keywordflow">return</span>;
00188     }
00189 
00190     wxArrayString* filelist = <a class="code" href="class_project_info.html#d0">SelectStringArray</a>(filterType);
00191     filelist-&gt;Add(filename);
00192     BoolArray* enablelist = <a class="code" href="class_project_info.html#d1">SelectBoolArray</a>(filterType);
00193     enablelist-&gt;Add(<span class="keyword">true</span>);
00194 
00195 }
00196 
<a name="l00208"></a><a class="code" href="class_project_info.html#a3">00208</a> <span class="keywordtype">void</span> <a class="code" href="class_project_info.html#a3">ProjectInfo::RemoveFileFromProject</a>(wxString filename, FileFilterType filterType)
00209 {
00210     wxArrayString* filelist = <a class="code" href="class_project_info.html#d0">SelectStringArray</a>(filterType);
00211 
00212     <span class="keywordtype">int</span> index = filelist-&gt;Index(filename);
00213     filelist-&gt;Remove(filename);
00214 
00215     BoolArray* enablelist = <a class="code" href="class_project_info.html#d1">SelectBoolArray</a>(filterType);
00216     enablelist-&gt;RemoveAt(index);
00217 }
00218 
<a name="l00230"></a><a class="code" href="class_project_info.html#a4">00230</a> <span class="keywordtype">bool</span> <a class="code" href="class_project_info.html#a4">ProjectInfo::FileIncludedInBuild</a>(wxString filename, FileFilterType filterType)
00231 {
00232     wxArrayString* filelist = <a class="code" href="class_project_info.html#d0">SelectStringArray</a>(filterType);
00233     <span class="keywordtype">int</span> index = filelist-&gt;Index(filename);
00234     
00235     BoolArray* enablelist = <a class="code" href="class_project_info.html#d1">SelectBoolArray</a>(filterType);
00236     <span class="keywordflow">return</span> enablelist-&gt;Item(index);
00237 }
00238 
<a name="l00251"></a><a class="code" href="class_project_info.html#a5">00251</a> <span class="keywordtype">void</span> <a class="code" href="class_project_info.html#a5">ProjectInfo::SetFileBuildInclusion</a>(wxString filename, FileFilterType filterType, <span class="keywordtype">bool</span> enable)
00252 {
00253     wxArrayString* filelist = <a class="code" href="class_project_info.html#d0">SelectStringArray</a>(filterType);
00254     <span class="keywordtype">int</span> index = filelist-&gt;Index(filename);
00255 
00256     BoolArray* enablelist = <a class="code" href="class_project_info.html#d1">SelectBoolArray</a>(filterType);
00257     (*enablelist)[index] = enable;
00258 }
00259 
<a name="l00268"></a><a class="code" href="class_project_info.html#a8">00268</a> wxArrayString <a class="code" href="class_project_info.html#a8">ProjectInfo::GetSourcesToBuild</a>()
00269 {
00270     wxArrayString sourcesToBuild;
00271     
00272     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; (<span class="keywordtype">int</span>)<a class="code" href="class_project_info.html#r4">m_sourcesEnabled</a>.GetCount(); i++)
00273     {
00274         <span class="keywordflow">if</span>(<a class="code" href="class_project_info.html#r4">m_sourcesEnabled</a>[i])
00275         {
00276             sourcesToBuild.Add(<a class="code" href="class_project_info.html#r1">m_sourceFiles</a>[i]);
00277         }
00278     }
00279     
00280     <span class="keywordflow">return</span> sourcesToBuild;
00281 }
00282 
00283 
<a name="l00294"></a><a class="code" href="class_project_info.html#a6">00294</a> <span class="keywordtype">void</span> <a class="code" href="class_project_info.html#a6">ProjectInfo::AddEditor</a>(<a class="code" href="class_chameleon_editor.html">ChameleonEditor</a>* edit)
00295 {
00296     <a class="code" href="class_project_info.html#r6">m_edPointers</a>.Add(edit);
00297 }
00298 
<a name="l00309"></a><a class="code" href="class_project_info.html#a7">00309</a> <span class="keywordtype">void</span> <a class="code" href="class_project_info.html#a7">ProjectInfo::RemoveEditor</a>(<a class="code" href="class_chameleon_editor.html">ChameleonEditor</a>* edit)
00310 {
00311     <a class="code" href="class_project_info.html#r6">m_edPointers</a>.Remove(edit);
00312 }
00313 
<a name="l00324"></a><a class="code" href="class_project_info.html#d2">00324</a> <span class="keywordtype">void</span> <a class="code" href="class_project_info.html#d2">ProjectInfo::MakeReadOnly</a>(<span class="keywordtype">bool</span> makeReadOnly)
00325 {
00326     <a class="code" href="class_project_info.html#r11">m_isReadOnly</a> = makeReadOnly;
00327     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; (<span class="keywordtype">int</span>)<a class="code" href="class_project_info.html#r6">m_edPointers</a>.GetCount(); i++)
00328     {
00329         <a class="code" href="class_chameleon_editor.html">ChameleonEditor</a>* ed = <a class="code" href="class_project_info.html#r6">m_edPointers</a>[i];
00330         ed-&gt;SetReadOnly(makeReadOnly);
00331     }
00332 }
00333 
<a name="l00344"></a><a class="code" href="class_project_info.html#a28">00344</a> <span class="keywordtype">void</span> <a class="code" href="class_project_info.html#a28">ProjectInfo::SetBeingCompiled</a>(<span class="keywordtype">bool</span> compiling)
00345 {
00346     <a class="code" href="class_project_info.html#r10">m_isBeingCompiled</a> = compiling;
00347     <a class="code" href="class_project_info.html#d2">MakeReadOnly</a>(compiling);
00348 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Apr 28 16:45:38 2004 for Chameleon by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
