<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Chameleon: compiler.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>compiler.cpp</h1><a href="compiler_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">//</span>
00003 <span class="comment">// Notes:</span>
00004 <span class="comment">//</span>
00006 <span class="comment"></span><span class="preprocessor">#include "<a class="code" href="compiler_8h.html">compiler.h</a>"</span>
00007 <span class="preprocessor">#include &lt;wx/filename.h&gt;</span>
00008 <span class="preprocessor">#include &lt;wx/txtstrm.h&gt;</span>
00009 <span class="preprocessor">#include "<a class="code" href="compilerevent_8h.html">compilerevent.h</a>"</span>
00010 <span class="preprocessor">#include "../common/chameleonprocessevent.h"</span>
00011 <span class="preprocessor">#include "../common/options.h"</span>
00012 <span class="preprocessor">#include "../network/networking.h"</span>
00013 <span class="preprocessor">#include "../common/projectinfo.h"</span>
00014 <span class="preprocessor">#include "../common/fixvsbug.h"</span>
00015 
00016 <span class="preprocessor">#include "../common/debug.h"</span>
00017 
00018 <span class="preprocessor">#ifdef _DEBUG</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#define new DEBUG_NEW</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00021 <span class="preprocessor"></span>
00022 
00023 BEGIN_EVENT_TABLE(<a class="code" href="class_compiler.html">Compiler</a>, wxEvtHandler)
00024     <a class="code" href="chameleonprocessevent_8h.html#a1">EVT_PROCESS_STDOUT</a>(Compiler::OnProcessOut)
00025     <a class="code" href="chameleonprocessevent_8h.html#a2">EVT_PROCESS_STDERR</a>(Compiler::OnProcessErr)
00026     <a class="code" href="chameleonprocessevent_8h.html#a0">EVT_PROCESS_ENDED</a>(Compiler::OnProcessTerm)
00027 END_EVENT_TABLE()
00028 
00029 
00030 
00031 
00032 
00033 
00034 
00035 
00036 
00037 
00038 
00039 
00040 
<a name="l00041"></a><a class="code" href="class_compiler.html#a0">00041</a> <a class="code" href="class_compiler.html#a0">Compiler::Compiler</a>(<a class="code" href="class_options.html">Options</a>* options, <a class="code" href="class_networking.html">Networking</a>* network)
00042 {
00043     <a class="code" href="class_compiler.html#r0">m_options</a> = options;
00044     <a class="code" href="class_compiler.html#r1">m_network</a> = network;
00045     <a class="code" href="class_compiler.html#r6">m_isCompiling</a> = <span class="keyword">false</span>;
00046     <a class="code" href="class_compiler.html#r7">m_isLinking</a> = <span class="keyword">false</span>;
00047     <a class="code" href="class_compiler.html#r2">m_compilerStdIn</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>; <span class="comment">// used only for forced terminations</span>
00048     <a class="code" href="class_compiler.html#r3">m_currProj</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00049     <a class="code" href="class_compiler.html#r4">m_currFileNum</a> = -2;
00050 }
00051 
<a name="l00060"></a><a class="code" href="class_compiler.html#a1">00060</a> <a class="code" href="class_compiler.html#a1">Compiler::~Compiler</a>() {
00061     <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#a3">IsCompiling</a>()) {
00062         <a class="code" href="class_compiler.html#r1">m_network</a>-&gt;<a class="code" href="class_networking.html#a16">ForceKillProcess</a>(<a class="code" href="class_compiler.html#r2">m_compilerStdIn</a>);
00063     }
00064 }
00065 
00066 
<a name="l00078"></a><a class="code" href="class_compiler.html#a2">00078</a> <span class="keywordtype">void</span> <a class="code" href="class_compiler.html#a2">Compiler::CompileProject</a>(<a class="code" href="class_project_info.html">ProjectInfo</a>* proj, wxEvtHandler* h)
00079 {
00080     <a class="code" href="class_compiler.html#r6">m_isCompiling</a> = <span class="keyword">true</span>;
00081     SetNextHandler(h);
00082     proj-&gt;<a class="code" href="class_project_info.html#a28">SetBeingCompiled</a>(<span class="keyword">true</span>); <span class="comment">// prevent user from editing while compiling</span>
00083 
00084     <a class="code" href="class_compiler.html#r3">m_currProj</a> = proj;
00085     <a class="code" href="class_compiler.html#r4">m_currFileNum</a> = 0;
00086     <a class="code" href="class_compiler.html#r8">m_compilingStatus</a> = <a class="code" href="datastructures_8h.html#a152a113">CR_OK</a>; <span class="comment">// default</span>
00087 
00088     <a class="code" href="class_compiler.html#d0">StartNextFile</a>();
00089 }
00090 
00091 
00092 <span class="comment">//Private:</span>
<a name="l00101"></a><a class="code" href="class_compiler.html#d0">00101</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_compiler.html#d0">Compiler::StartNextFile</a>()
00102 {
00103     wxArrayString a = <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a8">GetSourcesToBuild</a>();
00104     <span class="keywordtype">bool</span> isRemote = <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a13">IsRemote</a>();
00105 
00106     <span class="comment">// Create outfile name:</span>
00107     wxFileName inFile(a.Item(<a class="code" href="class_compiler.html#r4">m_currFileNum</a>));
00108     wxFileName outFile(inFile.GetPath(wxPATH_GET_VOLUME, isRemote ? wxPATH_UNIX : wxPATH_DOS) + <span class="stringliteral">"/"</span> + inFile.GetName() + <span class="stringliteral">".o"</span>);
00109 
00110     <span class="comment">// Start the compile:</span>
00111     wxString cmd = wxEmptyString;
00112     <span class="keywordflow">if</span>(isRemote) {
00113         cmd += <span class="stringliteral">"g++ "</span>; <span class="comment">// compiler (assuming it is in the PATH)</span>
00114         cmd += <span class="stringliteral">" -g -c -fmessage-length=0 "</span>; <span class="comment">// include gdb info, and don't link</span>
00115         cmd += <span class="stringliteral">" -o "</span> + outFile.GetFullPath(wxPATH_UNIX) + <span class="stringliteral">" "</span>;
00116         cmd +=  inFile.GetFullPath(wxPATH_UNIX);
00117         cmd +=  <span class="stringliteral">" &amp;&amp; echo C_O_M_P_I_L_E_SUCCESS || echo C_O_M_P_I_L_E_FAILED"</span>;
00118     }
00119     <span class="keywordflow">else</span> {
00120         cmd +=  <span class="stringliteral">"\""</span> + <a class="code" href="class_compiler.html#r0">m_options</a>-&gt;<a class="code" href="class_options.html#a15">GetMingwPath</a>() + <span class="stringliteral">"/bin/g++.exe\" "</span>; <span class="comment">// compiler</span>
00121         cmd +=  <span class="stringliteral">" -g -c -fmessage-length=0 "</span>;
00122         cmd +=  <span class="stringliteral">" -o "</span> + outFile.GetFullPath(wxPATH_DOS) + <span class="stringliteral">" "</span>;
00123         cmd +=  inFile.GetFullPath(wxPATH_DOS);
00124         cmd +=  <span class="stringliteral">" &amp;&amp; echo C_O_M_P_I_L_E_SUCCESS || echo C_O_M_P_I_L_E_FAILED"</span>;
00125     }
00126     <span class="comment">//wxLogDebug("Starting to Compile with cmd= \"%s\"", cmd);</span>
00127     <a class="code" href="class_compiler.html#r2">m_compilerStdIn</a> = <a class="code" href="class_compiler.html#r1">m_network</a>-&gt;<a class="code" href="class_networking.html#a15">StartCommand</a>(isRemote, cmd, <span class="keyword">this</span>);
00128 
00129     <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Add(outFile.GetFullPath(isRemote ? wxPATH_UNIX : wxPATH_DOS));
00130 
00131     <span class="comment">// Signal User</span>
00132     <a class="code" href="class_compiler_event.html">CompilerEvent</a> e(chEVT_COMPILER_START);
00133     e.<a class="code" href="class_compiler_event.html#a12">SetRemoteFile</a>(isRemote);
00134     e.<a class="code" href="class_compiler_event.html#a7">SetFile</a>(inFile);
00135     AddPendingEvent(e);
00136 
00137     <a class="code" href="class_compiler.html#r4">m_currFileNum</a>++; <span class="comment">// increment file counter</span>
00138 }
00139 
00140 
00141 <span class="comment">//Private:</span>
<a name="l00150"></a><a class="code" href="class_compiler.html#d1">00150</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_compiler.html#d1">Compiler::StartLinking</a>() {
00151     <span class="keywordtype">bool</span> isRemote = <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a13">IsRemote</a>();
00152 
00153     <span class="comment">// Create outfile name:</span>
00154     wxString name = <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a21">GetProjectBasePath</a>();
00155     <span class="keywordflow">if</span>(isRemote) {
00156         name += <span class="stringliteral">"/"</span> + <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a19">GetProjectName</a>() + <span class="stringliteral">".out"</span>;
00157     }
00158     <span class="keywordflow">else</span> {
00159         name += <span class="stringliteral">"\\"</span> + <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a19">GetProjectName</a>() + <span class="stringliteral">".exe"</span>;
00160     }
00161     wxFileName outFile(name);
00162 
00163     <span class="comment">// Assemble inFiles list:</span>
00164     wxString inFiles = wxEmptyString;
00165     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Count(); i++) {
00166         inFiles += <span class="stringliteral">" "</span> + <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Item(i);
00167     }
00168     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a11">GetLibraries</a>().Count(); i++) {
00169         inFiles += <span class="stringliteral">" "</span> + <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a11">GetLibraries</a>().Item(i);
00170     }
00171 
00172     <span class="comment">// Start the linking:</span>
00173     wxString cmd = wxEmptyString;
00174     <span class="keywordflow">if</span>(isRemote) {
00175         cmd += <span class="stringliteral">"g++ -g -fmessage-length=0 -o "</span> + outFile.GetFullPath(wxPATH_UNIX);
00176         cmd +=  inFiles;
00177         cmd +=  <span class="stringliteral">" &amp;&amp; echo C_O_M_P_I_L_E_SUCCESS || echo C_O_M_P_I_L_E_FAILED"</span>;
00178     }
00179     <span class="keywordflow">else</span> {
00180         cmd +=  <span class="stringliteral">"\""</span> + <a class="code" href="class_compiler.html#r0">m_options</a>-&gt;<a class="code" href="class_options.html#a15">GetMingwPath</a>() + <span class="stringliteral">"/bin/g++.exe\" "</span>;
00181         cmd +=  <span class="stringliteral">" -g -fmessage-length=0 -o "</span> + outFile.GetFullPath(wxPATH_DOS);
00182         cmd +=  inFiles;
00183         cmd +=  <span class="stringliteral">" &amp;&amp; echo C_O_M_P_I_L_E_SUCCESS || echo C_O_M_P_I_L_E_FAILED"</span>;
00184     }
00185     <span class="comment">//wxLogDebug("Starting to Link with cmd= \"%s\"", + cmd);</span>
00186     <a class="code" href="class_compiler.html#r2">m_compilerStdIn</a> = <a class="code" href="class_compiler.html#r1">m_network</a>-&gt;<a class="code" href="class_networking.html#a15">StartCommand</a>(isRemote, cmd, <span class="keyword">this</span>);
00187 
00188     <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Add(outFile.GetFullPath(isRemote ? wxPATH_UNIX : wxPATH_DOS));
00189 
00190     <span class="comment">// Signal User</span>
00191     <a class="code" href="class_compiler_event.html">CompilerEvent</a> e(chEVT_COMPILER_START);
00192     e.<a class="code" href="class_compiler_event.html#a12">SetRemoteFile</a>(isRemote);
00193     e.<a class="code" href="class_compiler_event.html#a7">SetFile</a>(wxFileName(<span class="stringliteral">"Linking"</span>)); <span class="comment">// kind of icky</span>
00194     AddPendingEvent(e);
00195 
00196     <a class="code" href="class_compiler.html#r4">m_currFileNum</a>++; <span class="comment">// increment file counter</span>
00197 
00198 }
00199 
00200 
00201 <span class="comment">// This is basically my last step before ending</span>
00202 <span class="comment">//Private:</span>
<a name="l00211"></a><a class="code" href="class_compiler.html#d3">00211</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_compiler.html#d3">Compiler::RemoveIntermediateFiles</a>() {
00212     wxString files = wxEmptyString;
00213     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Count(); i++) {
00214         files += <span class="stringliteral">" "</span> + <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Item(i);
00215     }
00216 
00217     <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a13">IsRemote</a>()) {
00218         <a class="code" href="class_compiler.html#r1">m_network</a>-&gt;<a class="code" href="class_networking.html#a10">StartRemoteCommand</a>(<span class="stringliteral">"rm "</span> + files, <span class="keyword">this</span>); <span class="comment">//pehaps NULL (instead of this)</span>
00219     }
00220     <span class="keywordflow">else</span> {
00221         <a class="code" href="class_compiler.html#r1">m_network</a>-&gt;<a class="code" href="class_networking.html#a11">StartLocalCommand</a>(<span class="stringliteral">"del "</span> + files, <span class="keyword">this</span>);
00222     }
00223 
00224     <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Clear();
00225 }
00226 
00227 
00228 <span class="comment">//Private:</span>
<a name="l00239"></a><a class="code" href="class_compiler.html#d4">00239</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_compiler.html#d4">Compiler::OnProcessTerm</a>(<a class="code" href="class_chameleon_process_event.html">ChameleonProcessEvent</a>&amp; e)
00240 {
00241     <a class="code" href="class_compiler.html#r2">m_compilerStdIn</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00242 
00243     <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#r6">m_isCompiling</a>) {
00244         <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#r8">m_compilingStatus</a> == <a class="code" href="datastructures_8h.html#a152a114">CR_TERMINATED</a>) {
00245             <span class="comment">//manually terminated</span>
00246             <a class="code" href="class_compiler.html#r6">m_isCompiling</a> = <span class="keyword">false</span>;
00247             <a class="code" href="class_compiler.html#d3">RemoveIntermediateFiles</a>();
00248             <span class="comment">//signal user</span>
00249             <a class="code" href="class_compiler_event.html">CompilerEvent</a> e(chEVT_COMPILER_END);
00250             e.<a class="code" href="class_compiler_event.html#a9">SetResult</a>(<a class="code" href="datastructures_8h.html#a152a114">CR_TERMINATED</a>);
00251             AddPendingEvent(e);
00252             <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a28">SetBeingCompiled</a>(<span class="keyword">false</span>);
00253         }
00254         <span class="keywordflow">else</span> {
00255             <span class="comment">// have I compiled all the files?</span>
00256             <span class="keywordflow">if</span>( <a class="code" href="class_compiler.html#r4">m_currFileNum</a> &gt;= (<span class="keywordtype">int</span>)<a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a8">GetSourcesToBuild</a>().GetCount() ) {
00257                 <a class="code" href="class_compiler.html#r6">m_isCompiling</a> = <span class="keyword">false</span>;
00258                 <span class="comment">// Determine if I should link:</span>
00259                 <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#r8">m_compilingStatus</a> == <a class="code" href="datastructures_8h.html#a152a113">CR_OK</a>) {
00260                     <a class="code" href="class_compiler.html#r7">m_isLinking</a> = <span class="keyword">true</span>;
00261                     <a class="code" href="class_compiler.html#d1">StartLinking</a>();
00262                 }
00263                 <span class="keywordflow">else</span> { <span class="comment">// it failed</span>
00264                     <a class="code" href="class_compiler.html#d3">RemoveIntermediateFiles</a>();
00265                     <span class="comment">//signal user</span>
00266                     <a class="code" href="class_compiler_event.html">CompilerEvent</a> e(chEVT_COMPILER_END);
00267                     e.<a class="code" href="class_compiler_event.html#a9">SetResult</a>(<a class="code" href="datastructures_8h.html#a152a112">CR_ERROR</a>);
00268                     AddPendingEvent(e);
00269                     <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a28">SetBeingCompiled</a>(<span class="keyword">false</span>);
00270                 }
00271             }
00272             <span class="keywordflow">else</span> {
00273                 <span class="comment">//m_currFileNum is incremented at the end of StartNextFile()</span>
00274                 <a class="code" href="class_compiler.html#d0">StartNextFile</a>();
00275             }
00276         }
00277     }
00278     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#r7">m_isLinking</a>) {
00279         <a class="code" href="class_compiler.html#r7">m_isLinking</a> = <span class="keyword">false</span>;
00280 
00281         <a class="code" href="class_compiler_event.html">CompilerEvent</a> e(chEVT_COMPILER_END);
00282         e.<a class="code" href="class_compiler_event.html#a9">SetResult</a>(<a class="code" href="class_compiler.html#r8">m_compilingStatus</a>);
00283 
00284         <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a27">SetCompiled</a>(<span class="keyword">false</span>); <span class="comment">// default</span>
00285         <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#r8">m_compilingStatus</a> == <a class="code" href="datastructures_8h.html#a152a113">CR_OK</a>) {
00286             <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a27">SetCompiled</a>(<span class="keyword">true</span>);
00287             <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a31">SetExecutableName</a>(<a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Last());
00288             e.<a class="code" href="class_compiler_event.html#a7">SetFile</a>(<a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Last());
00289         }
00290 
00291         <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Remove(<a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Count()-1); <span class="comment">// remove the executable</span>
00292 
00293         <span class="comment">// End</span>
00294         AddPendingEvent(e);
00295         <a class="code" href="class_compiler.html#r3">m_currProj</a>-&gt;<a class="code" href="class_project_info.html#a28">SetBeingCompiled</a>(<span class="keyword">false</span>);
00296         <a class="code" href="class_compiler.html#d3">RemoveIntermediateFiles</a>();
00297     }
00298     <span class="keywordflow">else</span> {
00299         wxLogDebug(<span class="stringliteral">"Compiler Recieved extranious term event"</span>);
00300         <span class="comment">// Probably from the file removal command</span>
00301     }
00302 
00303     <span class="keywordflow">return</span>;
00304 }
00305 
00306 
<a name="l00315"></a><a class="code" href="class_compiler.html#a4">00315</a> <span class="keywordtype">void</span> <a class="code" href="class_compiler.html#a4">Compiler::HaltCompiling</a>()
00316 {
00317     <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#r6">m_isCompiling</a>) {
00318         <a class="code" href="class_compiler.html#r2">m_compilerStdIn</a>-&gt;WriteString((<span class="keywordtype">char</span>)3); <span class="comment">// send ^C -- break</span>
00319         <a class="code" href="class_compiler.html#r8">m_compilingStatus</a> = <a class="code" href="datastructures_8h.html#a152a114">CR_TERMINATED</a>;
00320     }
00321 }
00322 
00323 
00324 <span class="comment">//Private:</span>
<a name="l00335"></a><a class="code" href="class_compiler.html#d5">00335</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_compiler.html#d5">Compiler::OnProcessOut</a>(<a class="code" href="class_chameleon_process_event.html">ChameleonProcessEvent</a>&amp; e)
00336 {
00337     <span class="comment">//wxLogDebug("Compiler Received: %s", e.GetString());</span>
00338 
00339     <span class="keywordflow">if</span>(<a class="code" href="class_compiler.html#r6">m_isCompiling</a> || <a class="code" href="class_compiler.html#r7">m_isLinking</a>) {
00340         wxString s = e.<a class="code" href="class_chameleon_process_event.html#a4">GetString</a>();
00341 
00342         <span class="keywordflow">if</span>(s.Contains(<span class="stringliteral">"C_O_M_P_I_L_E_SUCCESS"</span>)) {
00343             s.Remove(s.Find(<span class="stringliteral">"C_O_M_P_I_L_E_SUCCESS"</span>));
00344         }
00345         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(s.Contains(<span class="stringliteral">"C_O_M_P_I_L_E_FAILED"</span>)) {
00346             s.Remove(s.Find(<span class="stringliteral">"C_O_M_P_I_L_E_FAILED"</span>));
00347             <span class="comment">//remove this filename from the intermediate list</span>
00348             <a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Remove(<a class="code" href="class_compiler.html#r5">m_intermediateFiles</a>.Count()-1);
00349             <a class="code" href="class_compiler.html#r8">m_compilingStatus</a> = <a class="code" href="datastructures_8h.html#a152a112">CR_ERROR</a>;
00350         }
00351 
00352         <a class="code" href="class_compiler.html#d2">ParseCompilerMessages</a>(s);
00353     }
00354     <span class="keywordflow">else</span> {
00355         wxLogDebug(<span class="stringliteral">"Compiler Recieved Output while not compiling: "</span> + e.<a class="code" href="class_chameleon_process_event.html#a4">GetString</a>());
00356     }
00357 }
00358 
00359 
<a name="l00370"></a><a class="code" href="class_compiler.html#d6">00370</a> <span class="keywordtype">void</span> <a class="code" href="class_compiler.html#d6">Compiler::OnProcessErr</a>(<a class="code" href="class_chameleon_process_event.html">ChameleonProcessEvent</a>&amp; e)
00371 {
00372     <span class="comment">// Doesn't matter where it comes from</span>
00373     <a class="code" href="class_compiler.html#d5">OnProcessOut</a>(e);
00374 }
00375 
00376 
00377 <span class="comment">//Private:</span>
<a name="l00388"></a><a class="code" href="class_compiler.html#d2">00388</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_compiler.html#d2">Compiler::ParseCompilerMessages</a>(wxString s)
00389 {
00390     <a class="code" href="class_compiler_event.html">CompilerEvent</a> e(chEVT_COMPILER_PROBLEM);
00391     e.<a class="code" href="class_compiler_event.html#a11">SetGCCOutput</a>(s);
00392     AddPendingEvent(e);
00393 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Apr 28 16:45:38 2004 for Chameleon by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
