<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Chameleon: OptionsDialog.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>OptionsDialog.cpp</h1><a href="_options_dialog_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">// Name:        OptionsDialog.cpp</span>
00003 <span class="comment">// Purpose:     </span>
00004 <span class="comment">// Author:      Mark Erikson</span>
00005 <span class="comment">// Modified by: </span>
00006 <span class="comment">// Created:     11/23/03 16:02:26</span>
00007 <span class="comment">// RCS-ID:      </span>
00008 <span class="comment">// Copyright:   </span>
00009 <span class="comment">// Licence:     </span>
00011 <span class="comment"></span>
00012 <span class="preprocessor">#ifdef __GNUG__</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#pragma implementation "OptionsDialog.cpp"</span>
00014 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00015 <span class="preprocessor"></span>
00016 <span class="comment">// For compilers that support precompilation, includes "wx/wx.h".</span>
00017 <span class="preprocessor">#include "wx/wxprec.h"</span>
00018 
00019 <span class="preprocessor">#ifdef __BORLANDC__</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#pragma hdrstop</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00022 <span class="preprocessor"></span>
00023 <span class="preprocessor">#include "../../common/CommonHeaders.h"</span>
00024 <span class="preprocessor">#include "../../common/Options.h"</span>
00025 
00026 
00029 
00030 <span class="preprocessor">#include &lt;wx/checklst.h&gt;</span>
00031 <span class="preprocessor">#include &lt;wx/valtext.h&gt;</span>
00032 <span class="preprocessor">#include "<a class="code" href="_options_dialog_8h.html">OptionsDialog.h</a>"</span>
00033 <span class="preprocessor">#include "../ChameleonWindow.h"</span>
00034 
00035 <span class="preprocessor">#include "../../perms/p.h"</span>
00036 <span class="preprocessor">#include "../../common/debug.h"</span>
00037 
00038 
00039 <span class="preprocessor">#ifdef _DEBUG</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#define new DEBUG_NEW</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00042 <span class="preprocessor"></span>
00045 
00050 IMPLEMENT_CLASS( <a class="code" href="class_options_dialog.html">OptionsDialog</a>, wxDialog )
00051 
00052 
00056 BEGIN_EVENT_TABLE( <a class="code" href="class_options_dialog.html">OptionsDialog</a>, wxDialog )
00057 
00058 
00059     EVT_BUTTON( ID_SETAUTHCODE, OptionsDialog::OnUpdateAuthCode )
00060 
00061     EVT_BUTTON( ID_MINGWBROWSE, OptionsDialog::OnMinGWBrowseClick )
00062 
00063     EVT_BUTTON( ID_BUTTON_OK, OptionsDialog::OnButtonOkClick )
00064 
00065     EVT_BUTTON( ID_BUTTON_CANCEL, OptionsDialog::OnButtonCancelClick )
00066 
00067 
00068     EVT_CHAR(OptionsDialog::OnChar)
00069     EVT_TEXT_ENTER( ID_PROFCODE, OptionsDialog::OnEnter )
00070     EVT_TEXT_ENTER(ID_HOSTNAME, OptionsDialog::OnEnter)
00071     EVT_TEXT_ENTER(ID_USERNAME, OptionsDialog::OnEnter)
00072     EVT_TEXT_ENTER(ID_PASSWORD1, OptionsDialog::OnEnter)
00073     EVT_TEXT_ENTER(ID_PASSWORD2, OptionsDialog::OnEnter)
00074 
00075 END_EVENT_TABLE()
00076 
00077 
<a name="l00081"></a><a class="code" href="class_options_dialog.html#a0">00081</a> <a class="code" href="class_options_dialog.html#a0">OptionsDialog::OptionsDialog</a>( )
00082 {
00083 }
00084 
<a name="l00085"></a><a class="code" href="class_options_dialog.html#a1">00085</a> <a class="code" href="class_options_dialog.html#a0">OptionsDialog::OptionsDialog</a>( wxWindow* parent, <a class="code" href="class_options.html">Options</a>* options, wxWindowID <span class="keywordtype">id</span>,  <span class="keyword">const</span> wxString&amp; caption, <span class="keyword">const</span> wxPoint&amp; pos, <span class="keyword">const</span> wxSize&amp; size, <span class="keywordtype">long</span> style )
00086 {
00087     <a class="code" href="class_options_dialog.html#a2">Create</a>(parent, <span class="keywordtype">id</span>, caption, pos, size, style);
00088     <a class="code" href="class_options_dialog.html#o14">m_parentFrame</a> = (<a class="code" href="class_chameleon_window.html">ChameleonWindow</a>*)parent;
00089     m_options = options;
00090 
00091     wxTextValidator textval(wxFILTER_EXCLUDE_CHAR_LIST);
00092     wxStringList exclude;
00093     exclude.Add(<span class="stringliteral">"\""</span>);
00094     <a class="code" href="class_options_dialog.html#o7">m_password1</a>-&gt;SetValidator(textval);
00095     <a class="code" href="class_options_dialog.html#o8">m_password2</a>-&gt;SetValidator(textval);
00096 }
00097 
<a name="l00102"></a><a class="code" href="class_options_dialog.html#a2">00102</a> <span class="keywordtype">bool</span> <a class="code" href="class_options_dialog.html#a2">OptionsDialog::Create</a>( wxWindow* parent, wxWindowID <span class="keywordtype">id</span>, <span class="keyword">const</span> wxString&amp; caption, <span class="keyword">const</span> wxPoint&amp; pos, <span class="keyword">const</span> wxSize&amp; size, <span class="keywordtype">long</span> style )
00103 {
00105     <a class="code" href="class_options_dialog.html#o0">m_optionsNotebook</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00106     <a class="code" href="class_options_dialog.html#o1">m_checkList</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00107     <a class="code" href="class_options_dialog.html#o2">m_txtProfCode</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00108     <a class="code" href="class_options_dialog.html#o3">m_butSetAuthCode</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00109     <a class="code" href="class_options_dialog.html#o4">m_authCodeLabel</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00110     m_hostname = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00111     m_username = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00112     <a class="code" href="class_options_dialog.html#o7">m_password1</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00113     <a class="code" href="class_options_dialog.html#o8">m_password2</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00114     m_printStyle = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00115     m_showToolbarText = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00116     <a class="code" href="class_options_dialog.html#o11">m_termHistory</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00117     <a class="code" href="class_options_dialog.html#o12">m_txtMingwPath</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00118     <a class="code" href="class_options_dialog.html#o13">m_butBrowseMingw</a> = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00120 
00122     SetExtraStyle(wxWS_EX_BLOCK_EVENTS);
00123     wxDialog::Create( parent, <span class="keywordtype">id</span>, caption, pos, size, style );
00124 
00125     <a class="code" href="class_options_dialog.html#a3">CreateControls</a>();
00126     GetSizer()-&gt;Fit(<span class="keyword">this</span>);
00127     GetSizer()-&gt;SetSizeHints(<span class="keyword">this</span>);
00128     Centre();
00130     <span class="keywordflow">return</span> TRUE;
00131 }
00132 
<a name="l00137"></a><a class="code" href="class_options_dialog.html#a3">00137</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a3">OptionsDialog::CreateControls</a>()
00138 {    
00140 
00141     <a class="code" href="class_options_dialog.html">OptionsDialog</a>* item1 = <span class="keyword">this</span>;
00142 
00143     wxBoxSizer* item2 = <span class="keyword">new</span> wxBoxSizer(wxVERTICAL);
00144     item1-&gt;SetSizer(item2);
00145     item1-&gt;SetAutoLayout(TRUE);
00146 
00147     wxNotebook* item3 = <span class="keyword">new</span> wxNotebook( item1, <a class="code" href="_about_chameleon_dialog_8h.html#a6">ID_NOTEBOOK</a>, wxDefaultPosition, wxSize(400, 270), wxNB_TOP );
00148     <a class="code" href="class_options_dialog.html#o0">m_optionsNotebook</a> = item3;
00149     wxPanel* item4 = <span class="keyword">new</span> wxPanel( item3, <a class="code" href="_options_dialog_8h.html#a7">ID_PANEL1</a>, wxDefaultPosition, wxSize(100, 80), wxNO_BORDER|wxTAB_TRAVERSAL );
00150     wxBoxSizer* item5 = <span class="keyword">new</span> wxBoxSizer(wxVERTICAL);
00151     item4-&gt;SetSizer(item5);
00152     item4-&gt;SetAutoLayout(TRUE);
00153     wxStaticText* item6 = <span class="keyword">new</span> wxStaticText( item4, wxID_STATIC, _(<span class="stringliteral">"Chameleon has a variety of features that can be enabled by your professor.\nHere you can see what features are enabled, as well as enter an activation code."</span>), wxDefaultPosition, wxDefaultSize, wxNO_BORDER );
00154     item5-&gt;Add(item6, 0, wxGROW|wxLEFT|wxTOP|wxBOTTOM|wxADJUST_MINSIZE, 5);
00155     wxBoxSizer* item7 = <span class="keyword">new</span> wxBoxSizer(wxHORIZONTAL);
00156     item5-&gt;Add(item7, 0, wxGROW, 5);
00157     wxBoxSizer* item8 = <span class="keyword">new</span> wxBoxSizer(wxVERTICAL);
00158     item7-&gt;Add(item8, 0, wxGROW|wxALL, 0);
00159     wxStaticText* item9 = <span class="keyword">new</span> wxStaticText( item4, wxID_STATIC, _(<span class="stringliteral">"Current authorized features:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00160     item8-&gt;Add(item9, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE, 5);
00161     wxString* item10Strings = <a class="code" href="_crc16_8h.html#a0">NULL</a>;
00162     wxCheckListBox* item10 = <span class="keyword">new</span> wxCheckListBox( item4, <a class="code" href="_options_dialog_8h.html#a8">ID_CHECKLISTBOX</a>, wxDefaultPosition, wxSize(180, 175), 0, item10Strings, 0 );
00163     <a class="code" href="class_options_dialog.html#o1">m_checkList</a> = item10;
00164     item8-&gt;Add(item10, 1, wxGROW|wxALL, 5);
00165     wxBoxSizer* item11 = <span class="keyword">new</span> wxBoxSizer(wxVERTICAL);
00166     item7-&gt;Add(item11, 0, wxGROW, 5);
00167     wxStaticText* item12 = <span class="keyword">new</span> wxStaticText( item4, wxID_STATIC, _(<span class="stringliteral">"Enter the code from your professor here:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00168     item11-&gt;Add(item12, 0, wxALIGN_CENTER_HORIZONTAL|wxALL|wxADJUST_MINSIZE, 5);
00169     wxTextCtrl* item13 = <span class="keyword">new</span> wxTextCtrl( item4, <a class="code" href="_options_dialog_8h.html#a9">ID_PROFCODE</a>, _T(<span class="stringliteral">""</span>), wxDefaultPosition, wxDefaultSize, wxTE_PROCESS_ENTER );
00170     <a class="code" href="class_options_dialog.html#o2">m_txtProfCode</a> = item13;
00171     item11-&gt;Add(item13, 0, wxGROW|wxLEFT|wxRIGHT|wxBOTTOM, 5);
00172     wxButton* item14 = <span class="keyword">new</span> wxButton( item4, <a class="code" href="_options_dialog_8h.html#a10">ID_SETAUTHCODE</a>, _(<span class="stringliteral">"Set authorization code"</span>), wxDefaultPosition, wxSize(120, -1), 0 );
00173     <a class="code" href="class_options_dialog.html#o3">m_butSetAuthCode</a> = item14;
00174     item11-&gt;Add(item14, 0, wxALIGN_LEFT|wxALL, 5);
00175     wxStaticText* item15 = <span class="keyword">new</span> wxStaticText( item4, wxID_STATIC, _(<span class="stringliteral">"Current authorization code:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00176     item11-&gt;Add(item15, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE, 5);
00177     wxStaticText* item16 = <span class="keyword">new</span> wxStaticText( item4, wxID_STATIC, _T(<span class="stringliteral">""</span>), wxDefaultPosition, wxDefaultSize, 0 );
00178     <a class="code" href="class_options_dialog.html#o4">m_authCodeLabel</a> = item16;
00179     item11-&gt;Add(item16, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxBOTTOM|wxADJUST_MINSIZE, 5);
00180     item3-&gt;AddPage(item4, _(<span class="stringliteral">"Features"</span>));
00181     wxPanel* item17 = <span class="keyword">new</span> wxPanel( item3, <a class="code" href="_options_dialog_8h.html#a11">ID_PANEL</a>, wxDefaultPosition, wxSize(100, 80), wxSUNKEN_BORDER|wxTAB_TRAVERSAL );
00182     wxBoxSizer* item18 = <span class="keyword">new</span> wxBoxSizer(wxHORIZONTAL);
00183     item17-&gt;SetSizer(item18);
00184     item17-&gt;SetAutoLayout(TRUE);
00185     wxBoxSizer* item19 = <span class="keyword">new</span> wxBoxSizer(wxVERTICAL);
00186     item18-&gt;Add(item19, 0, wxALIGN_TOP, 5);
00187     wxStaticText* item20 = <span class="keyword">new</span> wxStaticText( item17, wxID_STATIC, _(<span class="stringliteral">"Network server address:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00188     item19-&gt;Add(item20, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE, 5);
00189     wxTextCtrl* item21 = <span class="keyword">new</span> wxTextCtrl( item17, <a class="code" href="_options_dialog_8h.html#a12">ID_HOSTNAME</a>, _T(<span class="stringliteral">""</span>), wxDefaultPosition, wxSize(160, -1), wxTE_PROCESS_ENTER );
00190     m_hostname = item21;
00191     item19-&gt;Add(item21, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxBOTTOM, 5);
00192     wxStaticText* item22 = <span class="keyword">new</span> wxStaticText( item17, wxID_STATIC, _(<span class="stringliteral">"Username:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00193     item19-&gt;Add(item22, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE, 5);
00194     wxTextCtrl* item23 = <span class="keyword">new</span> wxTextCtrl( item17, <a class="code" href="_options_dialog_8h.html#a13">ID_USERNAME</a>, _T(<span class="stringliteral">""</span>), wxDefaultPosition, wxSize(160, -1), wxTE_PROCESS_ENTER );
00195     m_username = item23;
00196     item19-&gt;Add(item23, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxBOTTOM, 5);
00197     wxStaticText* item24 = <span class="keyword">new</span> wxStaticText( item17, wxID_STATIC, _(<span class="stringliteral">"Password (no quote marks allowed):"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00198     item19-&gt;Add(item24, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE, 5);
00199     wxTextCtrl* item25 = <span class="keyword">new</span> wxTextCtrl( item17, <a class="code" href="_options_dialog_8h.html#a14">ID_PASSWORD1</a>, _T(<span class="stringliteral">""</span>), wxDefaultPosition, wxSize(160, -1), wxTE_PROCESS_ENTER|wxTE_PASSWORD );
00200     <a class="code" href="class_options_dialog.html#o7">m_password1</a> = item25;
00201     item19-&gt;Add(item25, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxBOTTOM, 5);
00202     wxStaticText* item26 = <span class="keyword">new</span> wxStaticText( item17, wxID_STATIC, _(<span class="stringliteral">"Confirm password:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00203     item19-&gt;Add(item26, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE, 5);
00204     wxTextCtrl* item27 = <span class="keyword">new</span> wxTextCtrl( item17, <a class="code" href="_options_dialog_8h.html#a15">ID_PASSWORD2</a>, _T(<span class="stringliteral">""</span>), wxDefaultPosition, wxSize(160, -1), wxTE_PROCESS_ENTER|wxTE_PASSWORD );
00205     <a class="code" href="class_options_dialog.html#o8">m_password2</a> = item27;
00206     item19-&gt;Add(item27, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxBOTTOM, 5);
00207     item3-&gt;AddPage(item17, _(<span class="stringliteral">"Network"</span>));
00208     wxPanel* item28 = <span class="keyword">new</span> wxPanel( item3, <a class="code" href="_options_dialog_8h.html#a16">ID_PANEL3</a>, wxDefaultPosition, wxSize(100, 80), wxSUNKEN_BORDER|wxTAB_TRAVERSAL );
00209     wxBoxSizer* item29 = <span class="keyword">new</span> wxBoxSizer(wxHORIZONTAL);
00210     item28-&gt;SetSizer(item29);
00211     item28-&gt;SetAutoLayout(TRUE);
00212     wxBoxSizer* item30 = <span class="keyword">new</span> wxBoxSizer(wxVERTICAL);
00213     item29-&gt;Add(item30, 1, wxALIGN_TOP, 5);
00214     wxStaticText* item31 = <span class="keyword">new</span> wxStaticText( item28, wxID_STATIC, _(<span class="stringliteral">"Print text in:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00215     item30-&gt;Add(item31, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE, 5);
00216     wxString item32Strings[] = {
00217         _(<span class="stringliteral">"Black and white"</span>),
00218         _(<span class="stringliteral">"Color"</span>)
00219     };
00220     wxComboBox* item32 = <span class="keyword">new</span> wxComboBox( item28, <a class="code" href="_options_dialog_8h.html#a17">ID_PRINTSTYLE</a>, _(<span class="stringliteral">"Black and white"</span>), wxDefaultPosition, wxDefaultSize, 2, item32Strings, wxCB_READONLY );
00221     m_printStyle = item32;
00222     item32-&gt;SetStringSelection(_(<span class="stringliteral">"Black and white"</span>));
00223     item30-&gt;Add(item32, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxBOTTOM, 5);
00224     wxCheckBox* item33 = <span class="keyword">new</span> wxCheckBox( item28, <a class="code" href="_options_dialog_8h.html#a18">ID_CHECKBOX</a>, _(<span class="stringliteral">"Show text on toolbar buttons"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00225     m_showToolbarText = item33;
00226     item33-&gt;SetValue(FALSE);
00227     item30-&gt;Add(item33, 1, wxGROW|wxALL, 5);
00228     wxBoxSizer* item34 = <span class="keyword">new</span> wxBoxSizer(wxHORIZONTAL);
00229     item30-&gt;Add(item34, 0, wxALIGN_LEFT|wxALL, 0);
00230     wxStaticText* item35 = <span class="keyword">new</span> wxStaticText( item28, wxID_STATIC, _(<span class="stringliteral">"Maximum history lines in the terminal:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00231     item34-&gt;Add(item35, 0, wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE, 5);
00232     wxSpinCtrl* item36 = <span class="keyword">new</span> wxSpinCtrl( item28, <a class="code" href="_options_dialog_8h.html#a19">ID_SPINCTRL</a>, _T(<span class="stringliteral">""</span>), wxDefaultPosition, wxSize(60, -1), wxSP_ARROW_KEYS, 25, 2500, 0 );
00233     <a class="code" href="class_options_dialog.html#o11">m_termHistory</a> = item36;
00234     item34-&gt;Add(item36, 0, wxALIGN_CENTER_VERTICAL|wxALL, 5);
00235     wxBoxSizer* item37 = <span class="keyword">new</span> wxBoxSizer(wxVERTICAL);
00236     item30-&gt;Add(item37, 0, wxALIGN_CENTER_HORIZONTAL, 5);
00237     wxStaticText* item38 = <span class="keyword">new</span> wxStaticText( item28, wxID_STATIC, _(<span class="stringliteral">"Path to MinGW:"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00238     item37-&gt;Add(item38, 0, wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE, 5);
00239     wxBoxSizer* item39 = <span class="keyword">new</span> wxBoxSizer(wxHORIZONTAL);
00240     item37-&gt;Add(item39, 0, wxALIGN_CENTER_HORIZONTAL, 5);
00241     wxTextCtrl* item40 = <span class="keyword">new</span> wxTextCtrl( item28, <a class="code" href="_options_dialog_8h.html#a20">ID_MINGWPATH</a>, _T(<span class="stringliteral">""</span>), wxDefaultPosition, wxSize(295, -1), 0 );
00242     <a class="code" href="class_options_dialog.html#o12">m_txtMingwPath</a> = item40;
00243     item39-&gt;Add(item40, 0, wxALIGN_CENTER_VERTICAL|wxLEFT|wxRIGHT|wxBOTTOM, 5);
00244     wxButton* item41 = <span class="keyword">new</span> wxButton( item28, <a class="code" href="_options_dialog_8h.html#a21">ID_MINGWBROWSE</a>, _(<span class="stringliteral">"Browse"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00245     <a class="code" href="class_options_dialog.html#o13">m_butBrowseMingw</a> = item41;
00246     item39-&gt;Add(item41, 0, wxALIGN_CENTER_VERTICAL|wxLEFT|wxRIGHT|wxBOTTOM, 5);
00247     item3-&gt;AddPage(item28, _(<span class="stringliteral">"Miscellaneous"</span>));
00248     item2-&gt;Add(item3, 0, wxALIGN_CENTER_HORIZONTAL|wxALL, 5);
00249 
00250     wxBoxSizer* item42 = <span class="keyword">new</span> wxBoxSizer(wxHORIZONTAL);
00251     item2-&gt;Add(item42, 0, wxALIGN_RIGHT|wxALL, 0);
00252 
00253     wxButton* item43 = <span class="keyword">new</span> wxButton( item1, <a class="code" href="_options_dialog_8h.html#a22">ID_BUTTON_OK</a>, _(<span class="stringliteral">"OK"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00254     item42-&gt;Add(item43, 0, wxALIGN_CENTER_VERTICAL|wxALL, 5);
00255 
00256     wxButton* item44 = <span class="keyword">new</span> wxButton( item1, <a class="code" href="_options_dialog_8h.html#a23">ID_BUTTON_CANCEL</a>, _(<span class="stringliteral">"Cancel"</span>), wxDefaultPosition, wxDefaultSize, 0 );
00257     item42-&gt;Add(item44, 0, wxALIGN_CENTER_VERTICAL|wxALL, 5);
00258 
00260 }
00261 
<a name="l00266"></a><a class="code" href="class_options_dialog.html#e0">00266</a> <span class="keywordtype">bool</span> <a class="code" href="class_options_dialog.html#e0">OptionsDialog::ShowToolTips</a>()
00267 {
00268   <span class="keywordflow">return</span> TRUE;
00269 }
00270 
00271 <span class="comment">/*</span>
00272 <span class="comment">wxCheckListBox* OptionsDialog::GetListBox()</span>
00273 <span class="comment">{</span>
00274 <span class="comment">    return this-&gt;m_checkList;</span>
00275 <span class="comment">}</span>
00276 <span class="comment"></span>
00277 <span class="comment">wxString OptionsDialog::GetServerAddress()</span>
00278 <span class="comment">{</span>
00279 <span class="comment">    return m_hostname-&gt;GetValue();</span>
00280 <span class="comment">}</span>
00281 <span class="comment"></span>
00282 <span class="comment">wxString OptionsDialog::GetUsername()</span>
00283 <span class="comment">{</span>
00284 <span class="comment">    return m_username-&gt;GetValue();</span>
00285 <span class="comment">}</span>
00286 <span class="comment"></span>
00287 <span class="comment">wxString OptionsDialog::GetPassword1()</span>
00288 <span class="comment">{</span>
00289 <span class="comment">    return m_password1-&gt;GetValue();</span>
00290 <span class="comment">}</span>
00291 <span class="comment"></span>
00292 <span class="comment">wxString OptionsDialog::GetPassword2()</span>
00293 <span class="comment">{</span>
00294 <span class="comment">    return m_password2-&gt;GetValue();</span>
00295 <span class="comment">}</span>
00296 <span class="comment"></span>
00297 <span class="comment">void OptionsDialog::SetServerAddress(wxString address)</span>
00298 <span class="comment">{</span>
00299 <span class="comment">    m_hostname-&gt;SetValue(address);</span>
00300 <span class="comment">}</span>
00301 <span class="comment"></span>
00302 <span class="comment">void OptionsDialog::SetUsername(wxString username)</span>
00303 <span class="comment">{</span>
00304 <span class="comment">    m_username-&gt;SetValue(username);</span>
00305 <span class="comment">}</span>
00306 <span class="comment"></span>
00307 <span class="comment">void OptionsDialog::SetPassword1(wxString pwd)</span>
00308 <span class="comment">{</span>
00309 <span class="comment">    m_password1-&gt;SetValue(pwd);</span>
00310 <span class="comment">}</span>
00311 <span class="comment"></span>
00312 <span class="comment">void OptionsDialog::SetPassword2(wxString pwd)</span>
00313 <span class="comment">{</span>
00314 <span class="comment">    m_password2-&gt;SetValue(pwd);</span>
00315 <span class="comment">}</span>
00316 <span class="comment">*/</span>
00317 
<a name="l00322"></a><a class="code" href="class_options_dialog.html#a6">00322</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a6">OptionsDialog::OnButtonOkClick</a>( wxCommandEvent&amp; event )
00323 {
00324     <span class="comment">// Insert custom code here</span>
00325     event.Skip();
00326 
00327     <a class="code" href="class_options_dialog.html#a13">ExitDialog</a>();
00328 }
00329 
<a name="l00334"></a><a class="code" href="class_options_dialog.html#a7">00334</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a7">OptionsDialog::OnButtonCancelClick</a>( wxCommandEvent&amp; event )
00335 {
00336     <span class="comment">// Insert custom code here</span>
00337     event.Skip();
00338     EndModal(wxCANCEL);
00339     <a class="code" href="class_options_dialog.html#o0">m_optionsNotebook</a>-&gt;SetSelection(0);
00340 }
00341 
<a name="l00342"></a><a class="code" href="class_options_dialog.html#a8">00342</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a8">OptionsDialog::OnChar</a>(wxKeyEvent &amp;event)
00343 {
00344     <span class="keywordflow">if</span>(event.GetKeyCode() == WXK_RETURN)
00345     {
00346         event.Skip();
00347     }
00348 
00349 }
00354 
00355 
00356 
00357 
00358 
00359 
00360 
00361 
00362 
00363 
<a name="l00364"></a><a class="code" href="class_options_dialog.html#a14">00364</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a14">OptionsDialog::OnEnter</a>( wxCommandEvent&amp; event )
00365 {
00366     <span class="comment">// Insert custom code here</span>
00367     event.Skip();
00368 
00369     <a class="code" href="class_options_dialog.html#a13">ExitDialog</a>();
00370 }
00371 
00372 
<a name="l00381"></a><a class="code" href="class_options_dialog.html#a13">00381</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a13">OptionsDialog::ExitDialog</a>()
00382 {
00383     <a class="code" href="class_options_dialog.html#o2">m_txtProfCode</a>-&gt;Clear();
00384 
00385     wxString pwd1 = <a class="code" href="class_options_dialog.html#o7">m_password1</a>-&gt;GetValue();
00386     wxString pwd2 = <a class="code" href="class_options_dialog.html#o8">m_password2</a>-&gt;GetValue();
00387 
00388     <span class="keywordflow">if</span>(pwd1 == pwd2)
00389     {
00390         <span class="comment">//Permission* perms = m_options-&gt;GetPerms();</span>
00391         
00392         <span class="keywordflow">if</span>(<a class="code" href="class_options_dialog.html#a10">EvaluateOptions</a>())
00393         {
00394             <a class="code" href="class_options_dialog.html#a12">UpdateChecklist</a>();
00395             EndModal(wxOK);
00396             <a class="code" href="class_options_dialog.html#o0">m_optionsNotebook</a>-&gt;SetSelection(0);
00397         }
00398         
00399     }
00400     <span class="keywordflow">else</span>
00401     {
00402         wxMessageBox(<span class="stringliteral">"Please enter the same password in both fields"</span>);
00403     }
00404 }
00405 
00406 <span class="comment">/*</span>
00407 <span class="comment">wxString OptionsDialog::GetAuthCode()</span>
00408 <span class="comment">{</span>
00409 <span class="comment">    return m_txtProfCode-&gt;GetValue();</span>
00410 <span class="comment"></span>
00411 <span class="comment">    if(authCodeString == wxEmptyString)</span>
00412 <span class="comment">    {</span>
00413 <span class="comment">        return -1;</span>
00414 <span class="comment">    }</span>
00415 <span class="comment"></span>
00416 <span class="comment">    long authCodeLong = 0;</span>
00417 <span class="comment"></span>
00418 <span class="comment">    authCodeString.ToLong(&amp;authCodeLong);</span>
00419 <span class="comment">    </span>
00420 <span class="comment"></span>
00421 <span class="comment">    return authCodeLong;</span>
00422 <span class="comment"></span>
00423 <span class="comment">}</span>
00424 <span class="comment">*/</span>
00425 
00430 
00431 
00432 
00433 
00434 
00435 
00436 
00437 
00438 
00439 
<a name="l00440"></a><a class="code" href="class_options_dialog.html#a4">00440</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a4">OptionsDialog::OnUpdateAuthCode</a>( wxCommandEvent&amp; event )
00441 {
00442     <span class="comment">// Insert custom code here</span>
00443     event.Skip();
00444 
00445     wxString newAuthCode = <a class="code" href="class_options_dialog.html#o2">m_txtProfCode</a>-&gt;GetValue();
00446     newAuthCode.MakeUpper();
00447 
00448     <a class="code" href="class_permission.html">Permission</a>* perms = m_options-&gt;<a class="code" href="class_options.html#a21">GetPerms</a>();
00449 
00450     <span class="keywordflow">if</span>(!perms-&gt;<a class="code" href="class_permission.html#a8">setGlobalAuthorized</a>(newAuthCode))
00451     {
00452         
00453         wxMessageBox(<span class="stringliteral">"Invalid authorization code.  Please check that it was entered correctly and try again."</span>);
00454     }
00455     <span class="keywordflow">else</span>
00456     {
00457         <a class="code" href="class_options_dialog.html#a12">UpdateChecklist</a>();
00458 
00459         <a class="code" href="class_options_dialog.html#o2">m_txtProfCode</a>-&gt;Clear();
00460         <a class="code" href="class_options_dialog.html#o4">m_authCodeLabel</a>-&gt;SetLabel(newAuthCode);
00461 
00462         wxMessageBox(<span class="stringliteral">"Authorized features updated."</span>);
00463         
00464     }
00465 
00466 }
00467 
00468 
<a name="l00477"></a><a class="code" href="class_options_dialog.html#a15">00477</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a15">OptionsDialog::EnableServerSettings</a>()
00478 {
00479     wxColour white(<span class="stringliteral">"white"</span>);
00480     m_hostname-&gt;SetEditable(<span class="keyword">true</span>);
00481     m_hostname-&gt;SetBackgroundColour(white);
00482     m_username-&gt;SetEditable(<span class="keyword">true</span>);
00483     m_username-&gt;SetBackgroundColour(white);
00484     <a class="code" href="class_options_dialog.html#o7">m_password1</a>-&gt;SetEditable(<span class="keyword">true</span>);
00485     <a class="code" href="class_options_dialog.html#o7">m_password1</a>-&gt;SetBackgroundColour(white);
00486     <a class="code" href="class_options_dialog.html#o8">m_password2</a>-&gt;SetEditable(<span class="keyword">true</span>);
00487     <a class="code" href="class_options_dialog.html#o8">m_password2</a>-&gt;SetBackgroundColour(white);
00488 }
00489 
<a name="l00498"></a><a class="code" href="class_options_dialog.html#a16">00498</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a16">OptionsDialog::DisableServerSettings</a>()
00499 {
00500     wxColour grey(<span class="stringliteral">"light grey"</span>);
00501     m_hostname-&gt;SetEditable(<span class="keyword">false</span>);
00502     m_hostname-&gt;SetBackgroundColour(grey);
00503     m_username-&gt;SetEditable(<span class="keyword">false</span>);
00504     m_username-&gt;SetBackgroundColour(grey);
00505     <a class="code" href="class_options_dialog.html#o7">m_password1</a>-&gt;SetEditable(<span class="keyword">false</span>);
00506     <a class="code" href="class_options_dialog.html#o7">m_password1</a>-&gt;SetBackgroundColour(grey);
00507     <a class="code" href="class_options_dialog.html#o8">m_password2</a>-&gt;SetEditable(<span class="keyword">false</span>);
00508     <a class="code" href="class_options_dialog.html#o8">m_password2</a>-&gt;SetBackgroundColour(grey);
00509 }
00510 
00511 <span class="comment">/*</span>
00512 <span class="comment">void OptionsDialog::SetAuthCode(wxString authcode)</span>
00513 <span class="comment">{</span>
00514 <span class="comment">    m_authCodeLabel-&gt;SetLabel(authcode);</span>
00515 <span class="comment">}</span>
00516 <span class="comment">*/</span>
00517 
<a name="l00529"></a><a class="code" href="class_options_dialog.html#a9">00529</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a9">OptionsDialog::BrowseForDir</a>(wxTextCtrl* textbox, wxString title)
00530 {
00531     wxString currentDir = textbox-&gt;GetValue();
00532 
00533     title = <span class="stringliteral">"Select the directory where MinGW is installed (usually inside the Chameleon directory)"</span>;
00534 
00535     wxString newDir;
00536     wxString defaultDir;
00537 
00538     <span class="keywordflow">if</span>(wxFileName::DirExists(currentDir))
00539     {
00540         defaultDir = currentDir;
00541     }
00542     <span class="keywordflow">else</span>
00543     {
00544         defaultDir = wxEmptyString;
00545     }
00546 
00547     wxString resultDir = wxDirSelector(title, defaultDir);
00548 
00549     <span class="keywordflow">if</span>(resultDir != wxEmptyString)
00550     {
00551         textbox-&gt;SetValue(resultDir);
00552     }
00553 
00554     
00555 }
00559 
00560 
00561 
00562 
00563 
00564 
00565 
00566 
00567 
00568 
<a name="l00569"></a><a class="code" href="class_options_dialog.html#a5">00569</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a5">OptionsDialog::OnMinGWBrowseClick</a>( wxCommandEvent&amp; event )
00570 {
00571     <span class="comment">// Insert custom code here</span>
00572     event.Skip();
00573 
00574     <a class="code" href="class_options_dialog.html#a9">BrowseForDir</a>(<a class="code" href="class_options_dialog.html#o12">m_txtMingwPath</a>, wxEmptyString);
00575 }
00576 
00577 
<a name="l00586"></a><a class="code" href="class_options_dialog.html#a10">00586</a> <span class="keywordtype">bool</span> <a class="code" href="class_options_dialog.html#a10">OptionsDialog::EvaluateOptions</a>()
00587 {
00588     <span class="keywordtype">bool</span> validOptions = <span class="keyword">true</span>;
00589 
00590     wxString outputMessage = wxEmptyString;
00591 
00592     wxString mingwPath = <a class="code" href="class_options_dialog.html#o12">m_txtMingwPath</a>-&gt;GetValue();
00593 
00594     <span class="keywordflow">if</span>( (mingwPath != m_options-&gt;<a class="code" href="class_options.html#a15">GetMingwPath</a>()) &amp;&amp; !wxFileName::DirExists(mingwPath))
00595     {
00596         outputMessage = mingwPath + <span class="stringliteral">" is not a valid path."</span>;
00597         validOptions = <span class="keyword">false</span>;
00598     }
00599 
00600 
00601     <span class="keywordflow">if</span>(validOptions)
00602     {
00603         <a class="code" href="class_permission.html">Permission</a>* perms = m_options-&gt;<a class="code" href="class_options.html#a21">GetPerms</a>();
00604         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_options_dialog.html#o1">m_checkList</a>-&gt;GetCount(); i++)
00605         {
00606             <span class="keywordtype">int</span> mappedPerm = <a class="code" href="class_options_dialog.html#o16">m_permMappings</a>[i];
00607 
00608             <span class="keywordflow">if</span>(<a class="code" href="class_options_dialog.html#o1">m_checkList</a>-&gt;IsChecked(i))
00609             {
00610                 perms-&gt;<a class="code" href="class_permission.html#a4">enable</a>(mappedPerm);
00611             }
00612             <span class="keywordflow">else</span>
00613             {
00614                 perms-&gt;<a class="code" href="class_permission.html#a5">disable</a>(mappedPerm);
00615             }
00616         }
00617 
00618         m_options-&gt;<a class="code" href="class_options.html#a6">SetHostname</a>(m_hostname-&gt;GetValue());
00619         m_options-&gt;<a class="code" href="class_options.html#a5">SetUsername</a>(m_username-&gt;GetValue());
00620         m_options-&gt;<a class="code" href="class_options.html#a7">SetPassphrase</a>(<a class="code" href="class_options_dialog.html#o7">m_password1</a>-&gt;GetValue());
00621         m_options-&gt;<a class="code" href="class_options.html#a12">SetTerminalHistorySize</a>(<a class="code" href="class_options_dialog.html#o11">m_termHistory</a>-&gt;GetValue());
00622 
00623         m_options-&gt;<a class="code" href="class_options.html#a4">SetMingwPath</a>(mingwPath);
00624 
00625         wxString selectedPrintStyleString = m_printStyle-&gt;GetValue();
00626         
00627         <span class="keywordflow">if</span>(selectedPrintStyleString == <span class="stringliteral">"Color"</span>)
00628         {
00629             m_options-&gt;<a class="code" href="class_options.html#a10">SetPrintStyle</a>(<a class="code" href="_options_8h.html#a1">wxSTC_PRINT_COLOURONWHITE</a>);
00630         }
00631         <span class="keywordflow">else</span>
00632         {
00633             m_options-&gt;<a class="code" href="class_options.html#a10">SetPrintStyle</a>(<a class="code" href="_options_8h.html#a0">wxSTC_PRINT_BLACKONWHITE</a>);
00634         }
00635 
00636         m_options-&gt;<a class="code" href="class_options.html#a11">SetShowToolbarText</a>(m_showToolbarText-&gt;IsChecked());
00637     }
00638     <span class="keywordflow">else</span>
00639     {
00640         wxMessageBox(outputMessage, <span class="stringliteral">"Invalid Option"</span>, wxOK | wxICON_WARNING);
00641     }
00642 
00643     <span class="keywordflow">return</span> validOptions;    
00644 }
00645 
<a name="l00654"></a><a class="code" href="class_options_dialog.html#a11">00654</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a11">OptionsDialog::InitializeDialog</a>()
00655 {
00656     <a class="code" href="class_permission.html">Permission</a>* perms = m_options-&gt;<a class="code" href="class_options.html#a21">GetPerms</a>();
00657 
00658     <a class="code" href="class_options_dialog.html#a12">UpdateChecklist</a>();
00659 
00660     m_hostname-&gt;SetValue(m_options-&gt;<a class="code" href="class_options.html#a17">GetHostname</a>());
00661     m_username-&gt;SetValue(m_options-&gt;<a class="code" href="class_options.html#a16">GetUsername</a>());
00662     wxString password = m_options-&gt;<a class="code" href="class_options.html#a18">GetPassphrase</a>();
00663     <a class="code" href="class_options_dialog.html#o7">m_password1</a>-&gt;SetValue(password);
00664     <a class="code" href="class_options_dialog.html#o8">m_password2</a>-&gt;SetValue(password);
00665 
00666     <a class="code" href="class_options_dialog.html#o12">m_txtMingwPath</a>-&gt;SetValue(m_options-&gt;<a class="code" href="class_options.html#a15">GetMingwPath</a>());
00667 
00668     <a class="code" href="class_options_dialog.html#o4">m_authCodeLabel</a>-&gt;SetLabel(perms-&gt;<a class="code" href="class_permission.html#a6">GetAuthCode</a>());
00669 
00670     wxString printStyleString;
00671     <span class="keywordflow">if</span>(m_options-&gt;<a class="code" href="class_options.html#a22">GetPrintStyle</a>() == <a class="code" href="_options_8h.html#a1">wxSTC_PRINT_COLOURONWHITE</a>)
00672     {
00673         printStyleString = <span class="stringliteral">"Color"</span>;
00674     }
00675     <span class="keywordflow">else</span>
00676     {
00677         printStyleString = <span class="stringliteral">"Black and white"</span>;
00678     }
00679 
00680     m_printStyle-&gt;SetValue(printStyleString);
00681     <a class="code" href="class_options_dialog.html#o11">m_termHistory</a>-&gt;SetValue(m_options-&gt;<a class="code" href="class_options.html#a24">GetTerminalHistorySize</a>());
00682 
00683     m_showToolbarText-&gt;SetValue(m_options-&gt;<a class="code" href="class_options.html#a23">GetShowToolbarText</a>());
00684 
00685 }
00686 
<a name="l00695"></a><a class="code" href="class_options_dialog.html#a12">00695</a> <span class="keywordtype">void</span> <a class="code" href="class_options_dialog.html#a12">OptionsDialog::UpdateChecklist</a>()
00696 {
00697     <a class="code" href="class_permission.html">Permission</a>* perms = m_options-&gt;<a class="code" href="class_options.html#a21">GetPerms</a>();
00698     <a class="code" href="class_options_dialog.html#o1">m_checkList</a>-&gt;Clear();
00699     <a class="code" href="class_options_dialog.html#o16">m_permMappings</a>.Clear();
00700 
00701     wxString optionname;
00702 
00703     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = <a class="code" href="datastructures_8h.html#a150a90">PERM_FIRST</a>; i &lt; <a class="code" href="datastructures_8h.html#a150a100">PERM_LAST</a>; i++)
00704     {       
00705         <span class="keywordflow">if</span>(perms-&gt;<a class="code" href="class_permission.html#a3">isAuthorized</a>(i))
00706         {
00707             optionname = perms-&gt;<a class="code" href="class_permission.html#a12">getPermName</a>(i);
00708             <a class="code" href="class_options_dialog.html#o1">m_checkList</a>-&gt;Append(optionname);
00709             <span class="keywordtype">int</span> checkIndex = <a class="code" href="class_options_dialog.html#o16">m_permMappings</a>.GetCount();
00710             <a class="code" href="class_options_dialog.html#o16">m_permMappings</a>.Add(i);
00711 
00712             <span class="keywordflow">if</span>(perms-&gt;<a class="code" href="class_permission.html#a2">isEnabled</a>(i))
00713             {
00714                 <a class="code" href="class_options_dialog.html#o1">m_checkList</a>-&gt;Check(checkIndex, <span class="keyword">true</span>);
00715             }
00716         }       
00717     }
00718 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Apr 28 16:45:38 2004 for Chameleon by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
